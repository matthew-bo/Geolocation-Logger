"use strict";exports.id=576,exports.ids=[576],exports.modules={16936:(e,t,o)=>{var n=o(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(o(7071)),r=n(o(10434)),i=y(o(16689));n(o(580));var s=n(o(68103)),c=n(o(73559)),l=y(o(86549)),d=o(54899),u=n(o(34904)),f=o(41050),p=o(20997);let g=["children","className"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(h=function(e){return e?o:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=h(t);if(o&&o.has(e))return o.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,o&&o.set(e,n),n}let m=e=>{let{classes:t}=e,o=(0,c.default)({root:["root"]},f.getDialogContentTextUtilityClass,t);return(0,r.default)({},t,o)},w=(0,l.default)(u.default,{shouldForwardProp:e=>(0,l.rootShouldForwardProp)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),b=i.forwardRef(function(e,t){let o=(0,d.useDefaultProps)({props:e,name:"MuiDialogContentText"}),{className:n}=o,i=(0,a.default)(o,g),c=m(i);return(0,p.jsx)(w,(0,r.default)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:i,className:(0,s.default)(c.root,n)},o,{classes:c}))});t.default=b},41050:(e,t,o)=>{var n=o(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getDialogContentTextUtilityClass=function(e){return(0,r.default)("MuiDialogContentText",e)};var a=n(o(62558)),r=n(o(71392));let i=(0,a.default)("MuiDialogContentText",["root"]);t.default=i},12047:(e,t,o)=>{var n=o(64836);Object.defineProperty(t,"__esModule",{value:!0});var a={dialogContentTextClasses:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"dialogContentTextClasses",{enumerable:!0,get:function(){return i.default}});var r=n(o(16936)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=s(t);if(o&&o.has(e))return o.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,o&&o.set(e,n),n}(o(41050));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(s=function(e){return e?o:t})(e)}Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},23:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var n=o(20997),a=o(56859);function r(){return(0,n.jsxs)(a.Html,{lang:"en",children:[(0,n.jsxs)(a.Head,{children:[n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),n.jsx("meta",{name:"theme-color",content:"#252525"}),n.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("body",{children:[n.jsx(a.Main,{}),n.jsx(a.NextScript,{})]})]})}},70247:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.d(t,{f:()=>c});var a=o(32994),r=o(1492),i=e([a,r]);[a,r]=i.then?(await i)():i;class s{async searchUsers(e,t){let o=(0,r.collection)(a.db,"users"),n=e.toLowerCase(),i=(await (0,r.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})),[s,c]=await Promise.all([this.getFriends(t),this.getPendingRequests(t)]),l=new Set(s.map(e=>e.id)),d=new Set(c.map(e=>e.senderId));return i.filter(e=>!(e.id===t||l.has(e.id)||d.has(e.id))&&(e.username?.toLowerCase().includes(n)||e.email?.toLowerCase().includes(n)||e.displayName?.toLowerCase().includes(n)||`${e.firstName} ${e.lastName}`.toLowerCase().includes(n)))}async sendFriendRequest(e,t){if(await this.areFriends(e,t))throw Error("Users are already friends");if(await this.getExistingRequest(e,t))throw Error("A friend request already exists between these users");let o=`${e}_${t}`,n=(await (0,r.getDoc)((0,r.doc)(a.db,"users",e))).data();await (0,r.setDoc)((0,r.doc)(a.db,"friendRequests",o),{senderId:e,receiverId:t,senderUsername:n.username||n.displayName||"",senderEmail:n.email||"",senderPhotoURL:n.photoURL||"",status:"pending",createdAt:(0,r.serverTimestamp)()})}async acceptFriendRequest(e){let t=(0,r.doc)(a.db,"friendRequests",e),o=await (0,r.getDoc)(t);if(!o.exists())throw Error("Friend request not found");let{senderId:n,receiverId:i}=o.data(),s=`${n}_${i}`;await (0,r.setDoc)((0,r.doc)(a.db,"friendships",s),{user1:n,user2:i,createdAt:(0,r.serverTimestamp)()}),await (0,r.deleteDoc)(t)}async rejectFriendRequest(e){await (0,r.deleteDoc)((0,r.doc)(a.db,"friendRequests",e))}async getPendingRequests(e){try{let t=(0,r.query)((0,r.collection)(a.db,"friendRequests"),(0,r.where)("receiverId","==",e),(0,r.where)("status","==","pending"));return(await (0,r.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting pending requests:",e),[]}}async getFriends(e){let t=(0,r.collection)(a.db,"friendships"),o=(0,r.query)(t,(0,r.or)((0,r.where)("user1","==",e),(0,r.where)("user2","==",e))),n=(await (0,r.getDocs)(o)).docs.map(e=>e.data()).map(t=>t.user1===e?t.user2:t.user1).map(e=>(0,r.getDoc)((0,r.doc)(a.db,"users",e)));return(await Promise.all(n)).filter(e=>e.exists()).map(e=>({id:e.id,...e.data(),isFriend:!0}))}async removeFriend(e,t){let o=`${e}_${t}`,n=`${t}_${e}`;try{await (0,r.deleteDoc)((0,r.doc)(a.db,"friendships",o))}catch(e){await (0,r.deleteDoc)((0,r.doc)(a.db,"friendships",n))}}async areFriends(e,t){try{let o=`${e}_${t}`,n=`${t}_${e}`,[i,s]=await Promise.all([(0,r.getDoc)((0,r.doc)(a.db,"friendships",o)),(0,r.getDoc)((0,r.doc)(a.db,"friendships",n))]);return i.exists()||s.exists()}catch(e){return console.error("Error checking friendship status:",e),!1}}async getSentRequests(e){try{let t=(0,r.query)((0,r.collection)(a.db,"friendRequests"),(0,r.where)("senderId","==",e),(0,r.where)("status","==","pending"));return(await (0,r.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting sent requests:",e),[]}}async getExistingRequest(e,t){let o=(0,r.collection)(a.db,"friendRequests"),n=(0,r.query)(o,(0,r.where)("senderId","==",e),(0,r.where)("receiverId","==",t),(0,r.where)("status","==","pending")),i=(0,r.query)(o,(0,r.where)("senderId","==",t),(0,r.where)("receiverId","==",e),(0,r.where)("status","==","pending")),[s,c]=await Promise.all([(0,r.getDocs)(n),(0,r.getDocs)(i)]),l=[...s.docs,...c.docs];return l.length>0?{id:l[0].id,...l[0].data()}:null}}let c=new s;n()}catch(e){n(e)}})},63821:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.d(t,{E:()=>l});var a=o(32994),r=o(1492),i=e([a,r]);[a,r]=i.then?(await i)():i;let s="pk.eyJ1IjoibWJvMTE1NzAiLCJhIjoiY204MmgxZjBuMHh2cjJrb3F3NmlyOXJjNSJ9.9XPT8wv6gvv6axeoIl7wPQ",c=e=>{if(console.log("Processing location for drink:",{id:e.id,hasLocation:!!e.location,hasPlaceInfo:!!e.placeInfo,customName:e.placeInfo?.customName,placeName:e.placeInfo?.placeName,address:e.placeInfo?.address,neighborhood:e.placeInfo?.neighborhood,city:e.placeInfo?.city,region:e.placeInfo?.region,coords:e.location?`${e.location.lat},${e.location.lng}`:"none"}),e.placeInfo?.customName)return e.placeInfo.customName;if(e.placeInfo?.placeName)return e.placeInfo.placeName;if(e.placeInfo?.address){let t=e.placeInfo.address;if(t.includes("(")&&t.includes(",")){if(e.placeInfo?.neighborhood)return e.placeInfo.neighborhood;if(e.placeInfo?.city&&e.placeInfo?.region)return`${e.placeInfo.city}, ${e.placeInfo.region}`}return e.placeInfo?.country&&(t=t.replace(`, ${e.placeInfo.country}`,"")),t}return e.placeInfo?.neighborhood?e.placeInfo.neighborhood:e.placeInfo?.city?`${e.placeInfo.city}${e.placeInfo.region?`, ${e.placeInfo.region}`:""}`:e.location&&"number"==typeof e.location.lat&&"number"==typeof e.location.lng?e.placeInfo?.nearestCity?`Location near ${e.placeInfo.nearestCity}`:e.placeInfo?.region?`Location in ${e.placeInfo.region}`:`Location at (${e.location.lat.toFixed(6)}, ${e.location.lng.toFixed(6)})`:"Unknown Location"},l={async getPlaceFromCoordinates(e){if(!e||!e.lat||!e.lng)return console.error("Invalid coordinates provided",e),null;try{let t=`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lng},${e.lat}.json?access_token=${s}&types=poi`,o=await fetch(t),n=await o.json();if(n.features&&n.features.length>0){let e=n.features[0],t=e.place_name,o=e.text,a=e.properties?.category||"unknown",r=n.features.find(e=>e.place_type.includes("neighborhood"))?.text||"",i=n.features.find(e=>e.place_type.includes("place"))?.text||"",s=n.features.find(e=>e.place_type.includes("region"))?.text||"",c=n.features.find(e=>e.place_type.includes("country"))?.text||"";return{placeName:o,placeType:a,address:t,neighborhood:r,city:i,region:s,country:c,isAutomaticallyGenerated:!0}}let a=`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lng},${e.lat}.json?access_token=${s}`,r=await fetch(a),i=await r.json();if(i.features&&i.features.length>0){let e=i.features[0].place_name,t=i.features.find(e=>e.place_type.includes("neighborhood"))?.text||"",o=i.features.find(e=>e.place_type.includes("place"))?.text||"",n=i.features.find(e=>e.place_type.includes("region"))?.text||"",a=i.features.find(e=>e.place_type.includes("country"))?.text||"";return{placeName:"Unknown Location",placeType:"location",address:e,neighborhood:t,city:o,region:n,country:a,isAutomaticallyGenerated:!0}}return null}catch(e){return console.error("Error getting place info from coordinates:",e),null}},async updateDrinkLocation(e,t){try{if(!e)return!1;let o=(0,r.doc)(a.db,"drinks",e);return await (0,r.updateDoc)(o,{placeInfo:t}),!0}catch(e){return console.error("Error updating drink location:",e),!1}},async getLocationStats(e){try{return{topPlaces:[],visitedCities:[],visitedCountries:[]}}catch(e){return console.error("Error getting location stats:",e),null}},getDisplayNameForLocation:c,getLocationStats:e=>{try{console.log(`Processing ${e.length} drinks for location stats`);let t=e.reduce((e,t)=>(e.total++,t.location&&e.withLocation++,t.placeInfo&&e.withPlaceInfo++,t.placeInfo?.customName&&e.withCustomName++,t.placeInfo?.placeName&&e.withPlaceName++,t.placeInfo?.address&&e.withAddress++,t.placeInfo?.city&&e.withCity++,e),{total:0,withLocation:0,withPlaceInfo:0,withCustomName:0,withPlaceName:0,withAddress:0,withCity:0});console.log("Drink location data summary:",t);let o=e.filter(e=>e.location&&(e.location.lat||e.location.lng||e.placeInfo?.placeName||e.placeInfo?.address||e.placeInfo?.city));if(console.log(`Found ${o.length} drinks with usable location data`),0===o.length)return{topPlaces:[],visitedCities:[],visitedStates:[],visitedCountries:[]};let n={},a={},r={},i={},s={};o.forEach(e=>{let t=c(e);if(s[t]||(s[t]={firstDrinkId:e.id,placeInfo:{...e.placeInfo},coords:e.location?{lat:e.location.lat,lng:e.location.lng}:null}),n[t]=(n[t]||0)+1,e.placeInfo?.city){let t=e.placeInfo.city;a[t]=(a[t]||0)+1}if(e.placeInfo?.region){let t=e.placeInfo.region;r[t]=(r[t]||0)+1}if(e.placeInfo?.country){let t=e.placeInfo.country;i[t]=(i[t]||0)+1}}),console.log("Place name mapping:",s);let l=Object.entries(n).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count),d=Object.entries(a).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count),u=Object.entries(r).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count),f=Object.entries(i).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count);return console.log(`Top places: ${JSON.stringify(l.slice(0,3))}`),{topPlaces:l,visitedCities:d,visitedStates:u,visitedCountries:f}}catch(e){return console.error("Error calculating location stats:",e),{topPlaces:[],visitedCities:[],visitedStates:[],visitedCountries:[]}}}};n()}catch(e){n(e)}})}};