(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{19344:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(698)}])},698:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return eC}});var a=t(85893),s=t(67294),n=t(98456),l=t(69417),i=t(5616),o=t(46901),c=t(65582),d=t(66242),x=t(69661),u=t(15861),h=t(86886),m=t(82280),p=t(38895),v=t(22797),Z=t(78462),b=t(9875),j=t(59334),g=t(87918),f=t(34386),y=t(93946),w=t(67720),k=t(64666),C=t(37645),P=t(6514),I=t(58951),S=t(31425),M=t(61903),D=t(62026),N=t(53298),B=t(67462),z=t(75244),q=t(36400),F=t(74347),R=t(6571),_=t(53630),E=t(51797),L=t(46761),T=t(92098),A=t(42498),U=t(90109),W=t(63821),O=t(70247),H=t(44267),J=t(591),Y=t(47120),V=t(94054),X=t(33841),G=t(85945),Q=t(18972),$=t(66672),K=t(5970),ee=t(26495),er=t(23148),et=t(75108),ea=t(63252),es=t(49185),en=t(92759),el=t(64232),ei=t(93429),eo=t(96406),ec=t(584),ed=t(43703),ex=t(67090),eu=t(4135),eh=t(9005),em=t(20466),ep=t(32912),ev=t(51085),eZ=t(82644),eb=t(49160);er.kL.register(er.uw,er.f$,er.ZL,er.Dx,er.u,er.De);let ej=[{value:"week",label:"Past Week"},{value:"month",label:"Past Month"},{value:"3months",label:"Past 3 Months"},{value:"year",label:"Past Year"}],eg=[{value:"total",label:"Total Drinks"},{value:"unique",label:"Unique Beers"},{value:"rating",label:"Average Rating"}],ef=[{value:"day",label:"By Day"},{value:"week",label:"By Week"},{value:"month",label:"By Month"}],ey=e=>{let{data:r,metric:t,currentDate:n,setCurrentDate:l}=e,o=(0,s.useMemo)(()=>{let e=(0,ec.Z)((0,ed.Z)(n)),r=(0,ex.Z)((0,eu.Z)(n)),t=(0,eh.Z)({start:e,end:r}),a=[],s=[];if(t.forEach(e=>{if(0===s.length&&0!==(0,em.Z)(e))for(let r=0;r<(0,em.Z)(e);r++)s.push(null);s.push(e),6===(0,em.Z)(e)&&(a.push(s),s=[])}),s.length>0){for(;s.length<7;)s.push(null);a.push(s)}return a},[n]),c=e=>e?r[(0,ep.Z)(e,"yyyy-MM-dd")]||0:null,d=Math.max(...Object.values(r));return(0,a.jsxs)(i.Z,{sx:{width:"100%",p:{xs:1,sm:2}},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,a.jsx)(y.Z,{onClick:()=>l(new Date(n.getFullYear(),n.getMonth()-1)),size:"small",children:(0,a.jsx)(u.Z,{variant:"body2",children:"←"})}),(0,a.jsx)(u.Z,{variant:"subtitle1",children:(0,ep.Z)(n,"MMMM yyyy")}),(0,a.jsx)(y.Z,{onClick:()=>l(new Date(n.getFullYear(),n.getMonth()+1)),size:"small",children:(0,a.jsx)(u.Z,{variant:"body2",children:"→"})})]}),(0,a.jsx)(h.ZP,{container:!0,spacing:.5,children:["S","M","T","W","T","F","S"].map(e=>(0,a.jsx)(h.ZP,{item:!0,xs:12/7,children:(0,a.jsx)(u.Z,{align:"center",sx:{color:"var(--text-secondary)",fontSize:"0.7rem"},children:e})},e))}),(0,a.jsx)(i.Z,{sx:{mt:.5},children:o.map((e,r)=>(0,a.jsx)(h.ZP,{container:!0,spacing:.5,children:e.map((e,r)=>(0,a.jsx)(h.ZP,{item:!0,xs:12/7,children:e&&(0,a.jsx)(f.Z,{title:"".concat((0,ep.Z)(e,"MMM d, yyyy"),"\n").concat(c(e)," ").concat("total"===t?"drinks":"unique"===t?"unique beers":"avg rating"),children:(0,a.jsxs)(i.Z,{sx:{aspectRatio:"1",p:.5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:.5,cursor:"pointer",position:"relative",bgcolor:(0,ev.Z)(e)?"var(--beer-amber)":(0,eZ.Z)(e)?"transparent":"rgba(251, 192, 45, ".concat(c(e)/(d||1)*.7,")"),border:r=>(0,eb.Z)(e,n)&&(0,ev.Z)(e)?"1px solid var(--copper)":"1px solid var(--border-color)",opacity:(0,eb.Z)(e,n)?1:.3,"&:hover":{bgcolor:"var(--beer-amber)",opacity:.8},minHeight:{xs:24,sm:32}},children:[(0,a.jsx)(u.Z,{sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},color:(0,ev.Z)(e)?"#000":"var(--text-primary)",fontWeight:(0,ev.Z)(e)?"bold":"normal",lineHeight:1},children:(0,ep.Z)(e,"d")}),c(e)>0&&(0,a.jsx)(u.Z,{sx:{fontSize:{xs:"0.6rem",sm:"0.65rem"},color:(0,ev.Z)(e)?"#000":"var(--text-secondary)",lineHeight:1,mt:.25},children:c(e)})]})})},r))},r))})]})};function ew(e){var r,t;let{drinks:n}=e,[c,x]=(0,s.useState)("month"),[u,m]=(0,s.useState)("total"),[p,v]=(0,s.useState)("day"),[Z,b]=(0,s.useState)(null),[j,g]=(0,s.useState)("bar"),[w,I]=(0,s.useState)(!1),[D,N]=(0,s.useState)(!1),[B,z]=(0,s.useState)(""),[q,F]=(0,s.useState)(new Date),R=(0,s.useMemo)(()=>{let e=new Set;return n.forEach(r=>{var t,a,s;(null===(t=r.placeInfo)||void 0===t?void 0:t.city)&&e.add(r.placeInfo.city),(null===(a=r.placeInfo)||void 0===a?void 0:a.state)&&e.add(r.placeInfo.state),(null===(s=r.placeInfo)||void 0===s?void 0:s.country)&&e.add(r.placeInfo.country)}),Array.from(e)},[n]),_=(0,s.useMemo)(()=>{let e=new Date,r=new Date;switch(c){case"week":r.setDate(e.getDate()-7);break;case"month":r.setMonth(e.getMonth()-1);break;case"3months":r.setMonth(e.getMonth()-3);break;case"year":r.setFullYear(e.getFullYear()-1)}let t=n.filter(t=>{var a,s,n;let l=new Date(t.timestamp),i=!Z||(null===(a=t.placeInfo)||void 0===a?void 0:a.city)===Z||(null===(s=t.placeInfo)||void 0===s?void 0:s.state)===Z||(null===(n=t.placeInfo)||void 0===n?void 0:n.country)===Z;return l>=r&&l<=e&&i}),a={};t.forEach(e=>{let r;let t=new Date(e.timestamp);switch(p){case"day":r=(0,ep.Z)(t,"yyyy-MM-dd");break;case"week":let s=(0,ec.Z)(t);r=(0,ep.Z)(s,"yyyy-MM-dd");break;case"month":r=(0,ep.Z)(t,"yyyy-MM")}a[r]||(a[r]={drinks:[],uniqueBeers:new Set,ratings:[]}),a[r].drinks.push(e),a[r].uniqueBeers.add(e.brand),e.rating&&a[r].ratings.push(e.rating)});let s=Object.keys(a).sort(),l=s.map(e=>{let r=a[e];switch(u){case"total":return r.drinks.length;case"unique":return r.uniqueBeers.size;case"rating":return r.ratings.length>0?r.ratings.reduce((e,r)=>e+r)/r.ratings.length:0}}),i={};return Object.entries(a).forEach(e=>{let[r,t]=e;i[r]="total"===u?t.drinks.length:"unique"===u?t.uniqueBeers.size:t.ratings.length>0?t.ratings.reduce((e,r)=>e+r)/t.ratings.length:0}),{labels:s,data:l,calendarData:i}},[n,c,u,p,Z]),E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"".concat((null===(r=eg.find(e=>e.value===u))||void 0===r?void 0:r.label)||""," ").concat((null===(t=ef.find(e=>e.value===p))||void 0===t?void 0:t.label)||""),color:"var(--text-primary)",font:{size:16,weight:"normal"}},tooltip:{callbacks:{label:e=>"rating"===u?"Rating: ".concat(e.raw.toFixed(1)):"".concat(e.raw," ").concat("total"===u?"drinks":"beers")}}},scales:{y:{beginAtZero:!0,ticks:{precision:"rating"===u?1:0,color:"var(--text-secondary)"},grid:{color:"var(--border-color)",drawBorder:!1}},x:{ticks:{color:"var(--text-secondary)"},grid:{display:!1}}}},L={labels:_.labels.map(e=>"month"===p?(0,ep.Z)(new Date(e),"MMM yyyy"):(0,ep.Z)(new Date(e),"MMM d")),datasets:[{data:_.data,backgroundColor:"rgba(251, 192, 45, 0.6)",borderColor:"var(--copper)",borderWidth:1,borderRadius:4,hoverBackgroundColor:"var(--beer-amber)"}]},T=async e=>{var r,t;let a="Check out my beer stats: ".concat(null===(r=eg.find(e=>e.value===u))||void 0===r?void 0:r.label," ").concat(null===(t=ef.find(e=>e.value===p))||void 0===t?void 0:t.label),s=window.location.href;switch(e){case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s)),"_blank");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"whatsapp":window.open("https://wa.me/?text=".concat(encodeURIComponent(a+" "+s)),"_blank");break;case"copy":try{await navigator.clipboard.writeText(s),z("Link copied to clipboard!"),N(!0)}catch(e){z("Failed to copy link"),N(!0)}}I(!1)};return(0,a.jsx)(d.Z,{className:"premium-card",sx:{overflow:"visible"},children:(0,a.jsxs)(H.Z,{children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:2},children:[(0,a.jsxs)(J.Z,{value:j,exclusive:!0,onChange:(e,r)=>r&&g(r),size:"small",sx:{"& .MuiToggleButton-root":{color:"var(--text-secondary)","&.Mui-selected":{color:"var(--beer-amber)",bgcolor:"rgba(251, 192, 45, 0.1)"}}},children:[(0,a.jsx)(Y.Z,{value:"bar",children:(0,a.jsx)(f.Z,{title:"Bar Chart",children:(0,a.jsx)(et.Z,{})})}),(0,a.jsx)(Y.Z,{value:"calendar",children:(0,a.jsx)(f.Z,{title:"Calendar View",children:(0,a.jsx)(ea.Z,{})})})]}),(0,a.jsx)(y.Z,{onClick:()=>I(!0),sx:{color:"var(--text-secondary)"},children:(0,a.jsx)(es.Z,{})})]}),(0,a.jsxs)(h.ZP,{container:!0,spacing:2,sx:{mb:2},children:["bar"===j&&(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(V.Z,{fullWidth:!0,size:"small",children:[(0,a.jsx)(X.Z,{children:"Time Frame"}),(0,a.jsx)(G.Z,{value:c,label:"Time Frame",onChange:e=>x(e.target.value),children:ej.map(e=>(0,a.jsx)(Q.Z,{value:e.value,children:e.label},e.value))})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(V.Z,{fullWidth:!0,size:"small",children:[(0,a.jsx)(X.Z,{children:"Metric"}),(0,a.jsx)(G.Z,{value:u,label:"Metric",onChange:e=>m(e.target.value),children:eg.map(e=>(0,a.jsx)(Q.Z,{value:e.value,children:e.label},e.value))})]})}),"bar"===j&&(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(V.Z,{fullWidth:!0,size:"small",children:[(0,a.jsx)(X.Z,{children:"Group By"}),(0,a.jsx)(G.Z,{value:p,label:"Group By",onChange:e=>v(e.target.value),children:ef.map(e=>(0,a.jsx)(Q.Z,{value:e.value,children:e.label},e.value))})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)($.Z,{size:"small",value:Z,onChange:(e,r)=>b(r),options:R,renderInput:e=>(0,a.jsx)(M.Z,{...e,label:"Filter by Location",fullWidth:!0})})})]}),(0,a.jsx)(i.Z,{sx:{height:{xs:300,sm:400}},children:"bar"===j?(0,a.jsx)(ee.$Q,{options:E,data:L}):(0,a.jsx)(ey,{data:_.calendarData,metric:u,currentDate:q,setCurrentDate:F})}),(0,a.jsxs)(k.Z,{open:w,onClose:()=>I(!1),PaperProps:{sx:{bgcolor:"var(--background)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}},children:[(0,a.jsx)(C.Z,{children:"Share Stats"}),(0,a.jsx)(P.Z,{children:(0,a.jsxs)(h.ZP,{container:!0,spacing:2,sx:{mt:1},children:[(0,a.jsx)(h.ZP,{item:!0,xs:3,children:(0,a.jsx)(y.Z,{onClick:()=>T("facebook"),sx:{color:"#1877f2"},children:(0,a.jsx)(en.Z,{})})}),(0,a.jsx)(h.ZP,{item:!0,xs:3,children:(0,a.jsx)(y.Z,{onClick:()=>T("twitter"),sx:{color:"#1da1f2"},children:(0,a.jsx)(el.Z,{})})}),(0,a.jsx)(h.ZP,{item:!0,xs:3,children:(0,a.jsx)(y.Z,{onClick:()=>T("whatsapp"),sx:{color:"#25d366"},children:(0,a.jsx)(ei.Z,{})})}),(0,a.jsx)(h.ZP,{item:!0,xs:3,children:(0,a.jsx)(y.Z,{onClick:()=>T("copy"),sx:{color:"var(--text-primary)"},children:(0,a.jsx)(eo.Z,{})})})]})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(l.Z,{onClick:()=>I(!1),sx:{color:"var(--text-secondary)"},children:"Close"})})]}),(0,a.jsx)(K.Z,{open:D,autoHideDuration:3e3,onClose:()=>N(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,a.jsx)(o.Z,{onClose:()=>N(!1),severity:"success",sx:{width:"100%"},children:B})})]})})}var ek=t(11163);function eC(){var e,r,t,H;let{user:J}=(0,T.a)(),{userId:Y}=(0,ek.useRouter)().query,[V,X]=(0,s.useState)({totalDrinks:0,uniqueBeers:0,favoriteBeer:null,averageRating:0,friends:0,topPlaces:[],visitedCities:[],visitedStates:[],visitedCountries:[]}),[G,Q]=(0,s.useState)(null),[$,K]=(0,s.useState)([]),[ee,er]=(0,s.useState)(!0),[et,ea]=(0,s.useState)(null),[es,en]=(0,s.useState)(!1),[el,ei]=(0,s.useState)(null),[eo,ec]=(0,s.useState)(!1),[ed,ex]=(0,s.useState)(!1),[eu,eh]=(0,s.useState)(null),[em,ep]=(0,s.useState)(""),[ev,eZ]=(0,s.useState)(!1),[eb,ej]=(0,s.useState)(null),[eg,ef]=(0,s.useState)(!1),ey=!Y||Y===(null==J?void 0:J.uid),eC=Y||(null==J?void 0:J.uid);(0,s.useEffect)(()=>{eC&&(eS(),!ey&&J&&eP())},[eC,J]);let eP=async()=>{try{if(await O.f.areFriends(J.uid,eC)){ej("friends");return}let e=await O.f.getSentRequests(J.uid),r=await O.f.getPendingRequests(J.uid),t=e.some(e=>e.receiverId===eC),a=r.some(e=>e.senderId===eC);t?ej("request_sent"):a?ej("request_received"):ej("not_friends")}catch(e){console.error("Error checking friendship status:",e),ej("error")}},eI=async()=>{if(!eg){ef(!0);try{switch(eb){case"not_friends":await O.f.sendFriendRequest(J.uid,eC),ej("request_sent");break;case"friends":await O.f.removeFriend(J.uid,eC),ej("not_friends");break;case"request_received":let e=(await O.f.getPendingRequests(J.uid)).find(e=>e.senderId===eC);e&&(await O.f.acceptFriendRequest(e.id),ej("friends"));break;case"request_sent":let r=(await O.f.getSentRequests(J.uid)).find(e=>e.receiverId===eC);r&&(await O.f.rejectFriendRequest(r.id),ej("not_friends"))}}catch(e){console.error("Error handling friend action:",e),ea("Failed to perform friend action. Please try again.")}finally{ef(!1)}}},eS=async()=>{er(!0),ea(null);try{await Promise.all([eM(),ez(),eD()])}catch(e){console.error("Error fetching user data:",e),ea("Failed to load profile data. Please try again later.")}finally{er(!1)}},eM=async()=>{try{let e=(0,U.JU)(A.db,"users",eC),r=await (0,U.QT)(e);r.exists()&&Q(r.data())}catch(e){throw console.error("Error fetching user profile:",e),e}},eD=async()=>{try{let e=(0,U.IO)((0,U.hJ)(A.db,"drinks"),(0,U.ar)("userId","==",eC),(0,U.Xo)("timestamp","desc"),(0,U.b9)(10)),r=(await (0,U.PL)(e)).docs.map(e=>{var r,t;let a=e.data(),s=(null===(t=a.timestamp)||void 0===t?void 0:null===(r=t.toDate)||void 0===r?void 0:r.call(t))?a.timestamp.toDate():new Date(a.timestamp||Date.now());return{id:e.id,...a,timestamp:s}});K(r)}catch(e){throw console.error("Error fetching recent drinks:",e),e}},eN=e=>{ei(e),en(!0)},eB=async()=>{if(el){ec(!0);try{await (0,U.oe)((0,U.JU)(A.db,"drinks",el.id)),K($.filter(e=>e.id!==el.id)),ez()}catch(e){console.error("Error deleting drink:",e),ea("Failed to delete drink. Please try again.")}finally{ec(!1),en(!1),ei(null)}}},ez=async()=>{try{let e=(0,U.IO)((0,U.hJ)(A.db,"drinks"),(0,U.ar)("userId","==",eC),(0,U.Xo)("timestamp","desc")),r=(await (0,U.PL)(e)).docs.map(e=>({id:e.id,...e.data()}));console.log("Fetched drinks for stats:",r.length),r.length>0&&console.log("Sample drink data:",r.slice(0,3).map(e=>{var r,t;return{id:e.id,brand:e.brand,hasLocation:!!e.location,hasPlaceInfo:!!e.placeInfo,placeName:null===(r=e.placeInfo)||void 0===r?void 0:r.placeName,address:null===(t=e.placeInfo)||void 0===t?void 0:t.address,placeInfo:e.placeInfo}}));let t=(0,U.IO)((0,U.hJ)(A.db,"friendships"),(0,U.ar)("userId","==",eC)),a=await (0,U.PL)(t),s=[...new Set(r.map(e=>e.brand))],n=r.map(e=>e.rating).filter(e=>e>0),l=n.length>0?n.reduce((e,r)=>e+r)/n.length:0,i=r.reduce((e,r)=>(r.brand&&(e[r.brand]=(e[r.brand]||0)+1),e),{}),o=Object.entries(i).sort((e,r)=>r[1]-e[1]),c=o.length>0?o[0][0]:null,d=W.E.getLocationStats(r);console.log("Location stats from service:",d),d.topPlaces&&d.topPlaces.length>0&&console.log("Top places names:",d.topPlaces.map(e=>e.name)),X({totalDrinks:r.length,uniqueBeers:s.length,favoriteBeer:c,averageRating:l,friends:a.size,...d})}catch(e){throw console.error("Error fetching user stats:",e),e}},eq=e=>{var r,t;eh(e),ep((null===(r=e.placeInfo)||void 0===r?void 0:r.customName)||(null===(t=e.placeInfo)||void 0===t?void 0:t.placeName)||""),ex(!0)},eF=async()=>{if(eu){eZ(!0);try{let e=eu.placeInfo||{},r={...e,customName:em,isCustom:!0};console.log("Updating drink location with:",{drinkId:eu.id,oldPlaceInfo:e,newPlaceInfo:r});let t=(0,U.JU)(A.db,"drinks",eu.id);await (0,U.r7)(t,{placeInfo:r}),K($.map(e=>e.id===eu.id?{...e,placeInfo:r}:e)),await ez(),ex(!1),eZ(!1),eh(null),ep("")}catch(e){console.error("Error updating location:",e),eZ(!1)}}};(0,s.useEffect)(()=>{V.topPlaces&&V.topPlaces.length>0&&console.log("Top places in stats:",V.topPlaces)},[V.topPlaces]),(0,s.useEffect)(()=>{V.topPlaces&&V.topPlaces.length>0&&console.log("Profile stats updated:",{topPlacesCount:V.topPlaces.length,firstPlace:V.topPlaces[0],allTopPlaces:V.topPlaces})},[V]);let eR=e=>e&&e.includes("Location (")&&e.includes(", ")?"Unnamed Location":e;return ee?(0,a.jsx)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,a.jsx)(n.Z,{})}):et?(0,a.jsx)(o.Z,{severity:"error",sx:{mt:2},children:et}):(0,a.jsx)(i.Z,{sx:{minHeight:"100vh",pt:10,px:2},children:(0,a.jsx)(c.Z,{maxWidth:"lg",children:ee?(0,a.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,a.jsx)(n.Z,{})}):et?(0,a.jsx)(o.Z,{severity:"error",children:et}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"glass-card",sx:{mb:4,position:"relative"},children:(0,a.jsxs)(i.Z,{sx:{p:3,textAlign:"center"},children:[(0,a.jsx)(i.Z,{sx:{position:"relative",display:"inline-block"},children:(0,a.jsx)(x.Z,{sx:{width:120,height:120,mx:"auto",mb:2,bgcolor:"var(--beer-amber)",fontSize:"2.5rem"},children:(null==G?void 0:null===(r=G.username)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.toUpperCase())||(null==G?void 0:null===(H=G.email)||void 0===H?void 0:null===(t=H[0])||void 0===t?void 0:t.toUpperCase())})}),(0,a.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:(null==G?void 0:G.displayName)||(null==G?void 0:G.username)||"Anonymous Beer Lover"}),(0,a.jsxs)(u.Z,{variant:"body1",color:"textSecondary",children:["Member since ",(e=>{if(!e)return"N/A";if(e.toDate&&"function"==typeof e.toDate)return e.toDate().toLocaleDateString();try{return new Date(e).toLocaleDateString()}catch(e){return console.error("Error formatting date:",e),"N/A"}})(null==G?void 0:G.createdAt)]}),(()=>{if(ey)return null;let e={variant:"contained",onClick:eI,disabled:eg,startIcon:eg?(0,a.jsx)(n.Z,{size:20}):null,sx:{mt:2}};switch(eb){case"friends":return(0,a.jsx)(l.Z,{...e,color:"success",startIcon:(0,a.jsx)(D.Z,{}),children:"Friend"});case"request_sent":return(0,a.jsx)(l.Z,{...e,color:"warning",startIcon:(0,a.jsx)(N.Z,{}),children:"Cancel Request"});case"request_received":return(0,a.jsx)(l.Z,{...e,color:"primary",startIcon:(0,a.jsx)(D.Z,{}),children:"Accept Request"});case"not_friends":return(0,a.jsx)(l.Z,{...e,color:"primary",startIcon:(0,a.jsx)(B.Z,{}),children:"Add Friend"});case"error":return(0,a.jsx)(l.Z,{...e,color:"primary",onClick:eP,startIcon:(0,a.jsx)(B.Z,{}),children:"Add Friend"});default:return null}})()]})}),(0,a.jsxs)(h.ZP,{container:!0,spacing:3,mb:4,children:[(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(i.Z,{className:"stat-card",children:[(0,a.jsx)(z.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,a.jsx)(u.Z,{className:"stat-value",children:V.totalDrinks}),(0,a.jsx)(u.Z,{className:"stat-label",children:"Total Beers"})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(i.Z,{className:"stat-card",children:[(0,a.jsx)(z.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,a.jsx)(u.Z,{className:"stat-value",children:V.uniqueBeers}),(0,a.jsx)(u.Z,{className:"stat-label",children:"Unique Beers"})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(i.Z,{className:"stat-card",children:[(0,a.jsx)(q.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,a.jsx)(u.Z,{className:"stat-value",children:V.averageRating.toFixed(1)}),(0,a.jsx)(u.Z,{className:"stat-label",children:"Avg Rating"})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsxs)(i.Z,{className:"stat-card",children:[(0,a.jsx)(F.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,a.jsx)(u.Z,{className:"stat-value",children:V.friends}),(0,a.jsx)(u.Z,{className:"stat-label",children:"Friends"})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,children:(0,a.jsxs)(i.Z,{className:"drink-card",sx:{mb:4,p:3},children:[(0,a.jsx)(u.Z,{variant:"h6",gutterBottom:!0,color:"var(--text-secondary)",children:"Top Drinking Spots"}),V.topPlaces&&V.topPlaces.length>0?(0,a.jsxs)(m.Z,{sx:{background:"transparent",boxShadow:"none",border:"1px solid var(--border-color)","&:before":{display:"none"},borderRadius:"8px"},children:[(0,a.jsx)(p.Z,{expandIcon:(0,a.jsx)(R.Z,{sx:{color:"var(--beer-amber)"}}),sx:{flexDirection:"row-reverse"},children:(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",ml:1},children:[(0,a.jsx)(_.Z,{sx:{mr:1,color:"var(--beer-amber)"}}),(0,a.jsxs)(u.Z,{children:[eR(V.topPlaces[0].name)," (",V.topPlaces[0].count," beers)"]})]})}),(0,a.jsx)(v.Z,{children:(0,a.jsx)(Z.Z,{sx:{p:0},children:V.topPlaces.slice(1).map((e,r)=>(0,a.jsx)(b.ZP,{sx:{py:1},children:(0,a.jsx)(j.Z,{primary:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(u.Z,{component:"span",sx:{mr:1},children:eR(e.name)}),(0,a.jsx)(g.Z,{label:"".concat(e.count," beers"),size:"small",sx:{bgcolor:"var(--beer-amber)",color:"#000",fontSize:"0.7rem"}})]})})},r))})})]}):(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",gutterBottom:!0,children:"Start logging drinks with locations to see your top spots!"}),(0,a.jsxs)(h.ZP,{container:!0,spacing:2,mt:2,children:[(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(u.Z,{variant:"subtitle2",color:"var(--text-secondary)",gutterBottom:!0,children:"Cities Visited"}),(0,a.jsx)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:V.visitedCities&&V.visitedCities.length>0?V.visitedCities.map((e,r)=>(0,a.jsx)(g.Z,{label:"".concat(e.name," (").concat(e.count,")"),size:"small",icon:(0,a.jsx)(_.Z,{}),sx:{bgcolor:"rgba(251, 192, 45, 0.1)",border:"1px solid var(--beer-amber)",color:"var(--text-primary)"}},r)):(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",children:"No cities recorded yet"})})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(u.Z,{variant:"subtitle2",color:"var(--text-secondary)",gutterBottom:!0,children:"States Visited"}),(0,a.jsx)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:V.visitedStates&&V.visitedStates.length>0?V.visitedStates.map((e,r)=>(0,a.jsx)(g.Z,{label:"".concat(e.name," (").concat(e.count,")"),size:"small",icon:(0,a.jsx)(_.Z,{}),sx:{bgcolor:"rgba(251, 192, 45, 0.1)",border:"1px solid var(--beer-amber)",color:"var(--text-primary)"}},r)):(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",children:"No states recorded yet"})})]})}),(0,a.jsx)(h.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(u.Z,{variant:"subtitle2",color:"var(--text-secondary)",gutterBottom:!0,children:"Countries Visited"}),(0,a.jsx)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:V.visitedCountries&&V.visitedCountries.length>0?V.visitedCountries.map((e,r)=>(0,a.jsx)(g.Z,{label:"".concat(e.name," (").concat(e.count,")"),size:"small",icon:(0,a.jsx)(_.Z,{}),sx:{bgcolor:"rgba(251, 192, 45, 0.1)",border:"1px solid var(--beer-amber)",color:"var(--text-primary)"}},r)):(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",children:"No countries recorded yet"})})]})})]})]})})]}),(0,a.jsxs)(i.Z,{sx:{mt:4,mb:4},children:[(0,a.jsx)(u.Z,{variant:"h5",gutterBottom:!0,children:"Drink Analytics"}),(0,a.jsx)(ew,{drinks:$})]}),V.favoriteBeer&&(0,a.jsxs)(i.Z,{className:"drink-card",sx:{mb:4,p:4},children:[(0,a.jsx)(u.Z,{variant:"h6",gutterBottom:!0,color:"var(--text-secondary)",children:"Favorite Beer"}),(0,a.jsx)(u.Z,{variant:"h4",className:"logo-text",children:V.favoriteBeer})]}),(0,a.jsxs)(i.Z,{className:"premium-card",sx:{p:4},children:[(0,a.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,a.jsx)(u.Z,{variant:"h6",color:"var(--beer-amber)",children:"Recent Activity"}),(0,a.jsx)(l.Z,{onClick:()=>{eC&&eS()},sx:{color:"var(--beer-amber)","&:hover":{color:"var(--copper)"}},children:"Refresh"})]}),$.length>0?(0,a.jsx)(Z.Z,{sx:{p:0},children:$.map((e,r)=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(b.ZP,{alignItems:"flex-start",sx:{flexDirection:"column"},children:(0,a.jsxs)(i.Z,{sx:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(u.Z,{color:"var(--text-primary)",sx:{fontWeight:"bold"},children:e.brand||"Unknown Brand"}),(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",children:new Date(e.timestamp).toLocaleString()}),(0,a.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",mt:.5},children:[(0,a.jsx)(_.Z,{sx:{fontSize:"0.9rem",color:"var(--text-secondary)",mr:.5}}),(0,a.jsx)(u.Z,{variant:"body2",color:"var(--text-secondary)",sx:{display:"flex",alignItems:"center"},children:e.placeInfo?(0,a.jsxs)(a.Fragment,{children:[e.placeInfo.customName||e.placeInfo.placeName||"Unknown Location",(0,a.jsx)(f.Z,{title:"Edit location name",children:(0,a.jsx)(y.Z,{size:"small",onClick:()=>eq(e),sx:{ml:.5,p:.3},children:(0,a.jsx)(E.Z,{sx:{fontSize:"0.8rem",color:"var(--text-secondary)"}})})})]}):(0,a.jsxs)(a.Fragment,{children:["Unknown Location",(0,a.jsx)(f.Z,{title:"Add location name",children:(0,a.jsx)(y.Z,{size:"small",onClick:()=>eq(e),sx:{ml:.5,p:.3},children:(0,a.jsx)(E.Z,{sx:{fontSize:"0.8rem",color:"var(--text-secondary)"}})})})]})})]})]}),(0,a.jsx)(y.Z,{edge:"end","aria-label":"delete",onClick:()=>eN(e),sx:{color:"var(--text-secondary)"},children:(0,a.jsx)(L.Z,{})})]})}),r<$.length-1&&(0,a.jsx)(w.Z,{component:"li",sx:{bgcolor:"var(--border-color)"}})]},e.id))}):(0,a.jsx)(u.Z,{color:"var(--text-secondary)",sx:{fontStyle:"italic"},children:"No beers logged yet. Start logging your beer journey!"})]}),(0,a.jsxs)(k.Z,{open:es,onClose:()=>en(!1),"aria-labelledby":"delete-dialog-title",PaperProps:{sx:{bgcolor:"var(--background)",color:"var(--text-primary)",border:"1px solid var(--border-color)","& .MuiDialogTitle-root":{color:"var(--text-primary)"},"& .MuiDialogContentText-root":{color:"var(--text-secondary)"}}},children:[(0,a.jsx)(C.Z,{id:"delete-dialog-title",children:"Delete Beer Entry"}),(0,a.jsx)(P.Z,{children:(0,a.jsx)(I.Z,{children:"Are you sure you want to delete this beer entry? This action cannot be undone."})}),(0,a.jsxs)(S.Z,{children:[(0,a.jsx)(l.Z,{onClick:()=>en(!1),disabled:eo,sx:{color:"var(--text-primary)"},children:"Cancel"}),(0,a.jsx)(l.Z,{onClick:eB,disabled:eo,sx:{color:"rgb(211, 47, 47)","&:hover":{bgcolor:"rgba(211, 47, 47, 0.1)"}},startIcon:eo?(0,a.jsx)(n.Z,{size:20}):(0,a.jsx)(L.Z,{}),children:eo?"Deleting...":"Delete"})]})]}),(0,a.jsxs)(k.Z,{open:ed,onClose:()=>!ev&&ex(!1),children:[(0,a.jsx)(C.Z,{children:"Edit Location Name"}),(0,a.jsxs)(P.Z,{children:[(0,a.jsx)(I.Z,{sx:{mb:2,color:"var(--text-secondary)"},children:'Enter a descriptive name for this location (e.g., "Home", "Joe\'s Bar", etc.)'}),(0,a.jsx)(M.Z,{autoFocus:!0,margin:"dense",label:"Location Name",fullWidth:!0,value:em,onChange:e=>ep(e.target.value),disabled:ev,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--border-color)"},"&:hover fieldset":{borderColor:"var(--beer-amber)"},"&.Mui-focused fieldset":{borderColor:"var(--beer-amber)"}}}})]}),(0,a.jsxs)(S.Z,{children:[(0,a.jsx)(l.Z,{onClick:()=>ex(!1),disabled:ev,sx:{color:"var(--text-secondary)"},startIcon:(0,a.jsx)(N.Z,{}),children:"Cancel"}),(0,a.jsx)(l.Z,{onClick:eF,disabled:ev||!em.trim(),sx:{color:"var(--beer-amber)","&.Mui-disabled":{color:"rgba(255, 255, 255, 0.3)"}},startIcon:ev?(0,a.jsx)(n.Z,{size:20}):(0,a.jsx)(D.Z,{}),children:"Save"})]})]})]})})})}}},function(e){e.O(0,[196,903,636,846,969,386,970,685,96,886,778,904,774,888,179],function(){return e(e.s=19344)}),_N_E=e.O()}]);