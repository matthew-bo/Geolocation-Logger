(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{69661:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var s=t(63366),a=t(87462),o=t(67294),n=t(90512),i=t(94780),l=t(90948),d=t(28628),c=t(88169),u=t(85893),h=(0,c.Z)((0,u.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),m=t(1588),x=t(34867);function f(e){return(0,x.ZP)("MuiAvatar",e)}(0,m.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var p=t(80560);let v=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],g=e=>{let{classes:r,variant:t,colorDefault:s}=e;return(0,i.Z)({root:["root",t,s&&"colorDefault"],img:["img"],fallback:["fallback"]},f,r)},b=(0,l.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],t.colorDefault&&r.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:(0,a.Z)({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:(0,a.Z)({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),y=(0,l.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Z=(0,l.ZP)(h,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});var j=o.forwardRef(function(e,r){let t=(0,d.i)({props:e,name:"MuiAvatar"}),{alt:i,children:l,className:c,component:h="div",slots:m={},slotProps:x={},imgProps:f,sizes:j,src:w,srcSet:C,variant:q="circular"}=t,P=(0,s.Z)(t,v),R=null,F=function({crossOrigin:e,referrerPolicy:r,src:t,srcSet:s}){let[a,n]=o.useState(!1);return o.useEffect(()=>{if(!t&&!s)return;n(!1);let a=!0,o=new Image;return o.onload=()=>{a&&n("loaded")},o.onerror=()=>{a&&n("error")},o.crossOrigin=e,o.referrerPolicy=r,o.src=t,s&&(o.srcset=s),()=>{a=!1}},[e,r,t,s]),a}((0,a.Z)({},f,{src:w,srcSet:C})),S=w||C,k=S&&"error"!==F,L=(0,a.Z)({},t,{colorDefault:!k,component:h,variant:q}),N=g(L),[A,M]=(0,p.Z)("img",{className:N.img,elementType:y,externalForwardedProps:{slots:m,slotProps:{img:(0,a.Z)({},f,x.img)}},additionalProps:{alt:i,src:w,srcSet:C,sizes:j},ownerState:L});return R=k?(0,u.jsx)(A,(0,a.Z)({},M)):l||0===l?l:S&&i?i[0]:(0,u.jsx)(Z,{ownerState:L,className:N.fallback}),(0,u.jsx)(b,(0,a.Z)({as:h,ownerState:L,className:(0,n.Z)(N.root,c),ref:r},P,{children:R}))})},58951:function(e,r,t){"use strict";t.d(r,{Z:function(){return b}});var s=t(63366),a=t(87462),o=t(67294),n=t(90512),i=t(94780),l=t(90948),d=t(14136),c=t(28628),u=t(15861),h=t(1588),m=t(34867);function x(e){return(0,m.ZP)("MuiDialogContentText",e)}(0,h.Z)("MuiDialogContentText",["root"]);var f=t(85893);let p=["children","className"],v=e=>{let{classes:r}=e,t=(0,i.Z)({root:["root"]},x,r);return(0,a.Z)({},r,t)},g=(0,l.ZP)(u.Z,{shouldForwardProp:e=>(0,d.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,r)=>r.root})({});var b=o.forwardRef(function(e,r){let t=(0,c.i)({props:e,name:"MuiDialogContentText"}),{className:o}=t,i=(0,s.Z)(t,p),l=v(i);return(0,f.jsx)(g,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:i,className:(0,n.Z)(l.root,o)},t,{classes:l}))})},11057:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/friends",function(){return t(96876)}])},96876:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return T}});var s=t(85893),a=t(67294),o=t(5616),n=t(98456),i=t(93946),l=t(15861),d=t(46901),c=t(69417),u=t(66242),h=t(79136),m=t(40044),x=t(78462),f=t(9875),p=t(69661),v=t(59334),g=t(93395),b=t(61903),y=t(64666),Z=t(37645),j=t(6514),w=t(58951),C=t(31425),q=t(14354),P=t(88169),R=(0,P.Z)((0,s.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),F=t(72456),S=t(46761),k=(0,P.Z)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),L=t(67462),N=(0,P.Z)((0,s.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),A=(0,P.Z)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),M=t(92098),U=t(70247),E=t(90109),I=t(42498),z=t(11163);let _=e=>{let{delay:r,size:t,left:a}=e;return(0,s.jsx)("div",{className:"bubble",style:{width:t,height:t,left:"".concat(a,"%"),bottom:"-100px",animation:"float 3s infinite ease-in-out ".concat(r,"s"),opacity:.5*Math.random()+.1}})};function T(){let{user:e}=(0,M.a)(),r=(0,z.useRouter)(),[t,P]=(0,a.useState)(""),[T,B]=(0,a.useState)([]),[J,D]=(0,a.useState)([]),[O,Q]=(0,a.useState)([]),[H,W]=(0,a.useState)(0),[V,X]=(0,a.useState)(!0),[G,Y]=(0,a.useState)(!1),[K,$]=(0,a.useState)(null),[ee,er]=(0,a.useState)(!1),[et,es]=(0,a.useState)(""),[ea,eo]=(0,a.useState)(!1),[en,ei]=(0,a.useState)(null),[el,ed]=(0,a.useState)({request:null,friend:null}),[ec,eu]=(0,a.useState)(!1),eh=Array.from({length:8},(e,r)=>({id:r,size:20*Math.random()+10,left:100*Math.random(),delay:2*Math.random()}));(0,a.useEffect)(()=>{e&&(em(),ex())},[e]);let em=async()=>{try{let r=await U.f.getFriends(e.uid);D(r)}catch(e){console.error("Error fetching friends:",e),$("Failed to load friends. Please try again.")}},ex=async()=>{try{let r=await U.f.getPendingRequests(e.uid);Q(r)}catch(e){console.error("Error fetching requests:",e),$("Failed to load friend requests. Please try again.")}finally{X(!1)}},ef=async()=>{if(!(t.length<2)){Y(!0),$(null);try{console.log("Searching for:",t,"with user ID:",null==e?void 0:e.uid);let r=(0,E.hJ)(I.db,"users"),s=await (0,E.PL)(r),a=t.toLowerCase().trim().replace(/\s+/g," "),o=s.docs.map(e=>({id:e.id,...e.data()})).filter(r=>{if(r.id===(null==e?void 0:e.uid))return!1;let t=(r.username||"").toLowerCase().trim().replace(/\s+/g," "),s=(r.email||"").toLowerCase().trim(),o=(r.displayName||"").toLowerCase().trim().replace(/\s+/g," "),n=(r.firstName||"").toLowerCase().trim().replace(/\s+/g," "),i=(r.lastName||"").toLowerCase().trim().replace(/\s+/g," ");return a.split(" ").every(e=>t.includes(e)||s.includes(e)||o.includes(e)||n.includes(e)||i.includes(e))});B(o)}catch(e){console.error("Error searching users:",e),$("Failed to search users. Please try again.")}finally{Y(!1)}}};(0,a.useEffect)(()=>{if(t.length>=2){let e=setTimeout(()=>{ef()},300);return()=>clearTimeout(e)}B([])},[t]);let ep=async r=>{ed(e=>({...e,request:r}));try{await U.f.sendFriendRequest(e.uid,r),B(e=>e.filter(e=>e.id!==r)),es("Friend request sent successfully"),er(!0)}catch(e){console.error("Error sending friend request:",e),$("Failed to send friend request. Please try again.")}finally{ed(e=>({...e,request:null}))}},ev=async e=>{ed(r=>({...r,request:e}));try{await U.f.acceptFriendRequest(e),Q(r=>r.filter(r=>r.id!==e)),await em(),es("Friend request accepted"),er(!0)}catch(e){console.error("Error accepting friend request:",e),$("Failed to accept friend request. Please try again.")}finally{ed(e=>({...e,request:null}))}},eg=async e=>{ed(r=>({...r,request:e}));try{await U.f.rejectFriendRequest(e),Q(r=>r.filter(r=>r.id!==e)),es("Friend request rejected"),er(!0)}catch(e){console.error("Error rejecting friend request:",e),$("Failed to reject friend request. Please try again.")}finally{ed(e=>({...e,request:null}))}},eb=async()=>{if(en){ed(e=>({...e,friend:en.id}));try{await U.f.removeFriend(e.uid,en.id),D(e=>e.filter(e=>e.id!==en.id)),es("Friend removed successfully"),er(!0)}catch(e){console.error("Error removing friend:",e),$("Failed to remove friend. Please try again.")}finally{ed(e=>({...e,friend:null})),eo(!1),ei(null)}}},ey=e=>{r.push("/profile?userId=".concat(e))},eZ=async()=>{eu(!0),$(null);try{await Promise.all([em(),ex()]),es("Friends list refreshed"),er(!0)}catch(e){console.error("Error refreshing friends:",e),$("Failed to refresh friends list. Please try again.")}finally{eu(!1)}};return V?(0,s.jsx)(o.Z,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"var(--background)"},children:(0,s.jsx)(n.Z,{sx:{color:"var(--beer-amber)"}})}):(0,s.jsxs)(o.Z,{sx:{minHeight:"100vh",pt:10,px:2,position:"relative",overflow:"hidden"},children:[eh.map(e=>(0,s.jsx)(_,{...e},e.id)),(0,s.jsxs)(o.Z,{sx:{maxWidth:800,mx:"auto",position:"relative",zIndex:1},children:[(0,s.jsxs)(o.Z,{sx:{textAlign:"center",mb:4},children:[(0,s.jsx)(i.Z,{sx:{width:80,height:80,mb:2,background:"var(--glass-background)","&:hover":{background:"var(--glass-background)"}},children:(0,s.jsx)(R,{sx:{fontSize:40,color:"var(--beer-amber)"}})}),(0,s.jsx)(l.Z,{variant:"h4",className:"logo-text",gutterBottom:!0,children:"Beer Buddies"})]}),K&&(0,s.jsx)(d.Z,{severity:"error",sx:{mb:4},action:(0,s.jsx)(c.Z,{color:"inherit",size:"small",onClick:eZ,startIcon:(0,s.jsx)(F.Z,{}),children:"Retry"}),children:K}),(0,s.jsxs)(u.Z,{className:"glass-card",sx:{mb:4},children:[(0,s.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:"1px solid var(--border-color)"},children:[(0,s.jsxs)(h.Z,{value:H,onChange:(e,r)=>W(r),variant:"fullWidth",sx:{flex:1,"& .MuiTab-root":{color:"var(--text-secondary)","&.Mui-selected":{color:"var(--beer-amber)"}},"& .MuiTabs-indicator":{backgroundColor:"var(--beer-amber)"}},children:[(0,s.jsx)(m.Z,{label:"My Friends"}),(0,s.jsx)(m.Z,{label:"Add Friends"}),(0,s.jsx)(m.Z,{label:"Requests (".concat(O.length,")")})]}),(0,s.jsx)(c.Z,{variant:"outlined",onClick:eZ,disabled:ec,sx:{ml:2,borderColor:"var(--beer-amber)",color:"var(--beer-amber)","&:hover":{borderColor:"var(--copper)"}},children:ec?(0,s.jsx)(n.Z,{size:20}):(0,s.jsx)(F.Z,{})})]}),(0,s.jsxs)(o.Z,{sx:{p:3},children:[0===H&&(0,s.jsxs)(x.Z,{children:[J.map(e=>{var r,t,a,o;return(0,s.jsxs)(f.ZP,{button:!0,onClick:()=>ey(e.id),sx:{borderBottom:"1px solid var(--border-color)","&:last-child":{borderBottom:"none"}},children:[(0,s.jsx)(p.Z,{src:e.photoURL,sx:{mr:2,bgcolor:"var(--beer-amber)"},children:(null===(t=e.username)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r.toUpperCase())||(null===(o=e.displayName)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.toUpperCase())||"?"}),(0,s.jsx)(v.Z,{primary:e.username||e.displayName||"Anonymous Beer Lover"}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(i.Z,{edge:"end",onClick:r=>{r.stopPropagation(),ei(e),eo(!0)},disabled:el.friend===e.id,sx:{color:"var(--text-secondary)"},children:el.friend===e.id?(0,s.jsx)(n.Z,{size:20}):(0,s.jsx)(S.Z,{})})})]},e.id)}),0===J.length&&(0,s.jsx)(f.ZP,{children:(0,s.jsx)(v.Z,{primary:"No friends yet",secondary:"Add some friends to see their beer journey!",sx:{textAlign:"center",color:"var(--text-secondary)"}})})]}),1===H&&(0,s.jsxs)(o.Z,{sx:{p:2},children:[(0,s.jsx)(b.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search users by username",value:t,onChange:e=>P(e.target.value),disabled:G,inputProps:{maxLength:50,pattern:"[A-Za-z0-9_-]*",title:"Only letters, numbers, underscores, and hyphens are allowed"},InputProps:{startAdornment:G?(0,s.jsx)(n.Z,{size:20,sx:{mr:1}}):(0,s.jsx)(k,{sx:{mr:1,color:"var(--text-secondary)"}})},sx:{mb:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--border-color)"},"&:hover fieldset":{borderColor:"var(--beer-amber)"},"&.Mui-focused fieldset":{borderColor:"var(--beer-amber)"}}}}),(0,s.jsxs)(x.Z,{children:[T.map(e=>{var r,t,a,o;return(0,s.jsxs)(f.ZP,{sx:{borderBottom:"1px solid var(--border-color)","&:last-child":{borderBottom:"none"}},children:[(0,s.jsx)(p.Z,{src:e.photoURL,sx:{mr:2,bgcolor:"var(--beer-amber)"},children:(null===(t=e.username)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r.toUpperCase())||(null===(o=e.displayName)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.toUpperCase())||"?"}),(0,s.jsx)(v.Z,{primary:e.username||e.displayName||"Anonymous Beer Lover"}),(0,s.jsx)(g.Z,{children:(0,s.jsx)(i.Z,{edge:"end",onClick:()=>ep(e.id),disabled:el.request===e.id,sx:{color:"var(--beer-amber)"},children:el.request===e.id?(0,s.jsx)(n.Z,{size:20}):(0,s.jsx)(L.Z,{})})})]},e.id)}),t.length>=2&&0===T.length&&!G&&(0,s.jsx)(f.ZP,{children:(0,s.jsx)(v.Z,{primary:"No users found",secondary:"Try a different search term",sx:{textAlign:"center",color:"var(--text-secondary)"}})})]})]}),2===H&&(0,s.jsxs)(x.Z,{children:[O.map(e=>{var r,t;return(0,s.jsxs)(f.ZP,{sx:{borderBottom:"1px solid var(--border-color)","&:last-child":{borderBottom:"none"}},children:[(0,s.jsx)(p.Z,{src:e.senderPhotoURL,sx:{mr:2,bgcolor:"var(--beer-amber)"},children:(null===(t=e.senderUsername)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r.toUpperCase())||"?"}),(0,s.jsx)(v.Z,{primary:e.senderUsername||"Anonymous Beer Lover",secondary:e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString():""}),(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(i.Z,{edge:"end",onClick:()=>ev(e.id),disabled:el.request===e.id,sx:{color:"var(--beer-amber)",mr:1},children:el.request===e.id?(0,s.jsx)(n.Z,{size:20}):(0,s.jsx)(N,{})}),(0,s.jsx)(i.Z,{edge:"end",onClick:()=>eg(e.id),disabled:el.request===e.id,sx:{color:"var(--text-secondary)"},children:el.request===e.id?(0,s.jsx)(n.Z,{size:20}):(0,s.jsx)(A,{})})]})]},e.id)}),0===O.length&&(0,s.jsx)(f.ZP,{children:(0,s.jsx)(v.Z,{primary:"No pending requests",secondary:"Friend requests will appear here",sx:{textAlign:"center",color:"var(--text-secondary)"}})})]})]})]})]}),(0,s.jsxs)(y.Z,{open:ea,onClose:()=>!el.friend&&eo(!1),PaperProps:{sx:{bgcolor:"var(--background)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}},children:[(0,s.jsx)(Z.Z,{children:"Remove Friend?"}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(w.Z,{sx:{color:"var(--text-secondary)"},children:["Are you sure you want to remove ",(null==en?void 0:en.username)||"this friend","? You'll need to send a new friend request to add them again."]})}),(0,s.jsxs)(C.Z,{children:[(0,s.jsx)(c.Z,{onClick:()=>eo(!1),disabled:el.friend,children:"Cancel"}),(0,s.jsx)(c.Z,{onClick:eb,disabled:el.friend,color:"error",children:el.friend?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{size:20,sx:{mr:1}}),"Removing..."]}):"Remove"})]})]}),(0,s.jsx)(q.Z,{open:ee,autoHideDuration:3e3,onClose:()=>er(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,s.jsx)(d.Z,{onClose:()=>er(!1),severity:"success",sx:{width:"100%"},children:et})})]})}},70247:function(e,r,t){"use strict";t.d(r,{f:function(){return n}});var s=t(42498),a=t(90109);class o{async searchUsers(e,r){let t=(0,a.hJ)(s.db,"users"),o=e.toLowerCase(),n=(await (0,a.PL)(t)).docs.map(e=>({id:e.id,...e.data()})),[i,l]=await Promise.all([this.getFriends(r),this.getPendingRequests(r)]),d=new Set(i.map(e=>e.id)),c=new Set(l.map(e=>e.senderId));return n.filter(e=>{var t,s;return!(e.id===r||d.has(e.id)||c.has(e.id))&&((null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(o))||(null===(s=e.displayName)||void 0===s?void 0:s.toLowerCase().includes(o))||"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(o))})}async sendFriendRequest(e,r){if(await this.areFriends(e,r))throw Error("Users are already friends");if(await this.getExistingRequest(e,r))throw Error("A friend request already exists between these users");let t="".concat(e,"_").concat(r),o=(await (0,a.QT)((0,a.JU)(s.db,"users",e))).data();await (0,a.pl)((0,a.JU)(s.db,"friendRequests",t),{senderId:e,receiverId:r,senderUsername:o.username||o.displayName||"",senderPhotoURL:o.photoURL||"",status:"pending",createdAt:(0,a.Bt)()})}async acceptFriendRequest(e){let r=(0,a.JU)(s.db,"friendRequests",e),t=await (0,a.QT)(r);if(!t.exists())throw Error("Friend request not found");let{senderId:o,receiverId:n}=t.data(),i="".concat(o,"_").concat(n);await (0,a.pl)((0,a.JU)(s.db,"friendships",i),{user1:o,user2:n,createdAt:(0,a.Bt)()}),await (0,a.oe)(r)}async rejectFriendRequest(e){await (0,a.oe)((0,a.JU)(s.db,"friendRequests",e))}async getPendingRequests(e){try{let r=(0,a.IO)((0,a.hJ)(s.db,"friendRequests"),(0,a.ar)("receiverId","==",e),(0,a.ar)("status","==","pending"));return(await (0,a.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting pending requests:",e),[]}}async getFriends(e){let r=(0,a.hJ)(s.db,"friendships"),t=(0,a.IO)(r,(0,a.or)((0,a.ar)("user1","==",e),(0,a.ar)("user2","==",e))),o=(await (0,a.PL)(t)).docs.map(e=>e.data()).map(r=>r.user1===e?r.user2:r.user1).map(e=>(0,a.QT)((0,a.JU)(s.db,"users",e)));return(await Promise.all(o)).filter(e=>e.exists()).map(e=>({id:e.id,...e.data(),isFriend:!0}))}async removeFriend(e,r){let t="".concat(e,"_").concat(r),o="".concat(r,"_").concat(e);try{await (0,a.oe)((0,a.JU)(s.db,"friendships",t))}catch(e){await (0,a.oe)((0,a.JU)(s.db,"friendships",o))}}async areFriends(e,r){try{let t="".concat(e,"_").concat(r),o="".concat(r,"_").concat(e),[n,i]=await Promise.all([(0,a.QT)((0,a.JU)(s.db,"friendships",t)),(0,a.QT)((0,a.JU)(s.db,"friendships",o))]);return n.exists()||i.exists()}catch(e){return console.error("Error checking friendship status:",e),!1}}async getSentRequests(e){try{let r=(0,a.IO)((0,a.hJ)(s.db,"friendRequests"),(0,a.ar)("senderId","==",e),(0,a.ar)("status","==","pending"));return(await (0,a.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting sent requests:",e),[]}}async getExistingRequest(e,r){let t=(0,a.hJ)(s.db,"friendRequests"),o=(0,a.IO)(t,(0,a.ar)("senderId","==",e),(0,a.ar)("receiverId","==",r),(0,a.ar)("status","==","pending")),n=(0,a.IO)(t,(0,a.ar)("senderId","==",r),(0,a.ar)("receiverId","==",e),(0,a.ar)("status","==","pending")),[i,l]=await Promise.all([(0,a.PL)(o),(0,a.PL)(n)]),d=[...i.docs,...l.docs];return d.length>0?{id:d[0].id,...d[0].data()}:null}}let n=new o}},function(e){e.O(0,[903,354,969,543,774,888,179],function(){return e(e.s=11057)}),_N_E=e.O()}]);