(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{98456:function(e,r,t){"use strict";t.d(r,{Z:function(){return E}});var n=t(63366),i=t(87462),a=t(67294),o=t(90512),s=t(94780),c=t(70917),l=t(98216),d=t(28628),u=t(90948),m=t(1588),g=t(34867);function p(e){return(0,g.ZP)("MuiCircularProgress",e)}(0,m.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var h=t(85893);let x=["className","color","disableShrink","size","style","thickness","value","variant"],f=e=>e,v,k,b,y,w=(0,c.F4)(v||(v=f`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Z=(0,c.F4)(k||(k=f`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),D=e=>{let{classes:r,variant:t,color:n,disableShrink:i}=e,a={root:["root",t,`color${(0,l.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,l.Z)(t)}`,i&&"circleDisableShrink"]};return(0,s.Z)(a,p,r)},j=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,r[t.variant],r[`color${(0,l.Z)(t.color)}`]]}})(({ownerState:e,theme:r})=>(0,i.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:r.transitions.create("transform")},"inherit"!==e.color&&{color:(r.vars||r).palette[e.color].main}),({ownerState:e})=>"indeterminate"===e.variant&&(0,c.iv)(b||(b=f`
      animation: ${0} 1.4s linear infinite;
    `),w)),C=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,r)=>r.svg})({display:"block"}),S=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.circle,r[`circle${(0,l.Z)(t.variant)}`],t.disableShrink&&r.circleDisableShrink]}})(({ownerState:e,theme:r})=>(0,i.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:r.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,c.iv)(y||(y=f`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Z));var E=a.forwardRef(function(e,r){let t=(0,d.i)({props:e,name:"MuiCircularProgress"}),{className:a,color:s="primary",disableShrink:c=!1,size:l=40,style:u,thickness:m=3.6,value:g=0,variant:p="indeterminate"}=t,f=(0,n.Z)(t,x),v=(0,i.Z)({},t,{color:s,disableShrink:c,size:l,thickness:m,value:g,variant:p}),k=D(v),b={},y={},w={};if("determinate"===p){let e=2*Math.PI*((44-m)/2);b.strokeDasharray=e.toFixed(3),w["aria-valuenow"]=Math.round(g),b.strokeDashoffset=`${((100-g)/100*e).toFixed(3)}px`,y.transform="rotate(-90deg)"}return(0,h.jsx)(j,(0,i.Z)({className:(0,o.Z)(k.root,a),style:(0,i.Z)({width:l,height:l},y,u),ownerState:v,ref:r,role:"progressbar"},w,f,{children:(0,h.jsx)(C,{className:k.svg,ownerState:v,viewBox:"22 22 44 44",children:(0,h.jsx)(S,{className:k.circle,style:b,ownerState:v,cx:44,cy:44,r:(44-m)/2,fill:"none",strokeWidth:m})})}))})},50294:function(e,r,t){"use strict";var n=t(87462),i=t(63366),a=t(67294),o=t(46271),s=t(57907),c=t(98885),l=t(2734),d=t(30577),u=t(51705),m=t(85893);let g=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function p(e){return`scale(${e}, ${e**2})`}let h={entering:{opacity:1,transform:p(1)},entered:{opacity:1,transform:"none"}},x="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),f=a.forwardRef(function(e,r){let{addEndListener:t,appear:f=!0,children:v,easing:k,in:b,onEnter:y,onEntered:w,onEntering:Z,onExit:D,onExited:j,onExiting:C,style:S,timeout:E="auto",TransitionComponent:P=c.ZP}=e,N=(0,i.Z)(e,g),I=(0,o.Z)(),A=a.useRef(),L=(0,l.Z)(),M=a.useRef(null),z=(0,u.Z)(M,(0,s.Z)(v),r),_=e=>r=>{if(e){let t=M.current;void 0===r?e(t):e(t,r)}},R=_(Z),T=_((e,r)=>{let t;(0,d.n)(e);let{duration:n,delay:i,easing:a}=(0,d.C)({style:S,timeout:E,easing:k},{mode:"enter"});"auto"===E?(t=L.transitions.getAutoHeightDuration(e.clientHeight),A.current=t):t=n,e.style.transition=[L.transitions.create("opacity",{duration:t,delay:i}),L.transitions.create("transform",{duration:x?t:.666*t,delay:i,easing:a})].join(","),y&&y(e,r)}),F=_(w),U=_(C),$=_(e=>{let r;let{duration:t,delay:n,easing:i}=(0,d.C)({style:S,timeout:E,easing:k},{mode:"exit"});"auto"===E?(r=L.transitions.getAutoHeightDuration(e.clientHeight),A.current=r):r=t,e.style.transition=[L.transitions.create("opacity",{duration:r,delay:n}),L.transitions.create("transform",{duration:x?r:.666*r,delay:x?n:n||.333*r,easing:i})].join(","),e.style.opacity=0,e.style.transform=p(.75),D&&D(e)}),O=_(j);return(0,m.jsx)(P,(0,n.Z)({appear:f,in:b,nodeRef:M,onEnter:T,onEntered:F,onEntering:R,onExit:$,onExited:O,onExiting:U,addEndListener:e=>{"auto"===E&&I.start(A.current||0,e),t&&t(M.current,e)},timeout:"auto"===E?null:E},N,{children:(e,r)=>a.cloneElement(v,(0,n.Z)({style:(0,n.Z)({opacity:0,transform:p(.75),visibility:"exited"!==e||b?void 0:"hidden"},h[e],S,v.props.style),ref:z},r))}))});f.muiSupportAuto=!0,r.Z=f},75557:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(96883)}])},96883:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return E}});var n=t(85893),i=t(67294),a=t(11163),o=t(65582),s=t(5616),c=t(15861),l=t(46901),d=t(69417),u=t(98456),m=t(14354),g=t(84808),p=t(75244),h=t(92098),x=t(9008),f=t.n(x),v=t(41664),k=t.n(v),b=t(90948),y=t(90109),w=t(42498);let Z={async logDrink(e,r){try{let t=await (0,y.ET)((0,y.hJ)(w.db,"drinks"),{userId:e,...r,timestamp:new Date().toISOString()}),n=(0,y.JU)(w.db,"users",e);return(await (0,y.QT)(n)).exists()?await (0,y.r7)(n,{previousDrinks:(0,y.vr)(r.drinkName)}):await (0,y.pl)(n,{previousDrinks:[r.drinkName],createdAt:new Date().toISOString()}),{success:!0,drinkId:t.id}}catch(e){return console.error("Error logging drink:",e),{success:!1,error:e.message}}},async getUserDrinks(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=(0,y.IO)((0,y.hJ)(w.db,"drinks"),(0,y.ar)("userId","==",e),(0,y.Xo)("timestamp","desc")),n=await (0,y.PL)(t),i=[];return n.forEach(e=>{i.push({id:e.id,...e.data()})}),i.filter(e=>{let t=!0;return r.drinkName&&(t=t&&e.drinkName.toLowerCase().includes(r.drinkName.toLowerCase())),r.container&&(t=t&&e.container===r.container),r.rating&&(t=t&&e.rating===r.rating),r.startDate&&(t=t&&new Date(e.timestamp)>=new Date(r.startDate)),r.endDate&&(t=t&&new Date(e.timestamp)<=new Date(r.endDate)),t})}catch(e){return console.error("Error getting drinks:",e),[]}},async getPreviousDrinks(e){try{let r=(0,y.JU)(w.db,"users",e),t=await (0,y.QT)(r);return t.exists()&&t.data().previousDrinks||[]}catch(e){return console.error("Error getting previous drinks:",e),[]}},async exportDrinks(e){try{let r=(await this.getUserDrinks(e)).map(e=>['"'.concat(e.drinkName,'"'),e.container,e.rating,e.location.coordinates[1],e.location.coordinates[0],e.timestamp].join(","));return"Drink Name,Container,Rating,Latitude,Longitude,Timestamp\n"+r.join("\n")}catch(e){throw console.error("Error exporting drinks:",e),e}},async quickLogLastDrink(e){try{let r=(0,y.IO)((0,y.hJ)(w.db,"drinks"),(0,y.ar)("userId","==",e),(0,y.Xo)("timestamp","desc"),(0,y.b9)(1)),t=await (0,y.PL)(r);if(t.empty)return{success:!1,message:"No previous drinks found. Please log a drink first."};let n=t.docs[0].data(),i=n.location,a=n.placeInfo;try{let e=await new Promise((e,r)=>{navigator.geolocation.getCurrentPosition(e,r)});i={coordinates:[e.coords.longitude,e.coords.latitude]};let r=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e.coords.latitude,"&lon=").concat(e.coords.longitude)),t=await r.json();a={address:t.display_name,city:t.address.city||t.address.town||t.address.village,state:t.address.state,country:t.address.country,neighborhood:t.address.suburb||t.address.neighbourhood||"Unknown",placeName:t.name||t.display_name.split(",")[0]}}catch(e){console.warn("Using last drink location due to geolocation error:",e)}let o={...n,timestamp:new Date,location:i,placeInfo:a},s=await (0,y.ET)((0,y.hJ)(w.db,"drinks"),o),c=(0,y.JU)(w.db,"users",e);return(await (0,y.QT)(c)).exists()?await (0,y.r7)(c,{previousDrinks:(0,y.vr)(o.drinkName)}):await (0,y.pl)(c,{previousDrinks:[o.drinkName],createdAt:new Date().toISOString()}),{success:!0,message:"\uD83C\uDF7A Drink logged successfully!",drinkId:s.id}}catch(e){return console.error("Error quick logging drink:",e),{success:!1,message:this.getErrorMessage(e)}}},getErrorMessage(e){switch(e.code){case"permission-denied":return"Location access denied. Please enable location services to log drinks.";case"position-unavailable":return"Unable to get current location. Using last known location.";case"timeout":return"Location request timed out. Please try again.";case"not-found":return"No previous drinks found. Please log a drink first.";default:return e.message||"An unexpected error occurred. Please try again."}}};var D=t(91444);let j=(0,b.ZP)(d.Z)(e=>{let{theme:r}=e;return{width:"100%",background:"var(--glass-background)",border:"1px solid var(--glass-border)",backdropFilter:"blur(10px)",color:"var(--beer-amber)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, var(--beer-amber) 0%, var(--copper) 100%)",color:"var(--dark-wood)",transform:"scale(1.02)",boxShadow:"0 8px 32px rgba(251, 192, 45, 0.3)"},"&:disabled":{background:"var(--glass-background)",opacity:.5}}});function C(e){let{userId:r}=e,[t,a]=(0,i.useState)(!1),o=async()=>{if(!r){D.Am.error("Please log in to use this feature",{position:"top-center",autoClose:3e3,theme:"dark"});return}a(!0);try{let e=await Z.quickLogLastDrink(r);e.success?D.Am.success(e.message,{position:"top-center",autoClose:3e3,theme:"dark"}):D.Am.error(e.message,{position:"top-center",autoClose:5e3,theme:"dark"})}catch(e){D.Am.error("An unexpected error occurred. Please try again.",{position:"top-center",autoClose:5e3,theme:"dark"})}finally{a(!1)}};return(0,n.jsx)(j,{onClick:o,disabled:t,startIcon:t?(0,n.jsx)(u.Z,{size:20,color:"inherit"}):(0,n.jsx)(p.Z,{}),children:t?"Logging...":"Repeat Last Beer"})}let S=e=>{let{delay:r,size:t,left:i}=e;return(0,n.jsx)("div",{className:"bubble",style:{width:t,height:t,left:"".concat(i,"%"),bottom:"-100px",animation:"float 3s infinite ease-in-out ".concat(r,"s"),opacity:.5*Math.random()+.1}})};function E(){let e=(0,a.useRouter)(),{handleProtectedAction:r,user:t}=(0,h.a)(),[x,v]=(0,i.useState)(!1),[b,y]=(0,i.useState)(null),[w,Z]=(0,i.useState)(!1),[D,j]=(0,i.useState)(""),E=Array.from({length:15},(e,r)=>({id:r,size:30*Math.random()+10,left:100*Math.random(),delay:2*Math.random()}));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(f(),{children:[(0,n.jsx)("title",{children:"Beer Peer | Track Your Beers"}),(0,n.jsx)("meta",{name:"description",content:"Track and share your beer experiences with friends"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(o.Z,{maxWidth:!1,sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(to bottom, var(--dark-wood), #121212)",position:"relative",overflow:"hidden",pt:8},children:[E.map(e=>(0,n.jsx)(S,{...e},e.id)),(0,n.jsxs)(s.Z,{sx:{position:"relative",zIndex:1,textAlign:"center",maxWidth:"600px",width:"100%",px:3,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(c.Z,{variant:"h1",component:"h1",className:"logo-text",sx:{mb:2,fontSize:{xs:"3rem",sm:"4rem",md:"5rem"},fontWeight:700},children:"Beer Peer"}),(0,n.jsx)(c.Z,{variant:"h2",component:"h2",sx:{mb:6,fontSize:{xs:"1.5rem",sm:"2rem"},color:"var(--text-primary)",fontWeight:300},children:"Track your beer adventures"}),b&&(0,n.jsx)(l.Z,{severity:"error",sx:{mb:4,width:"100%"},onClose:()=>y(null),children:b}),(0,n.jsxs)(s.Z,{sx:{position:"relative",display:"inline-block",width:{xs:"220px",sm:"300px"}},children:[(0,n.jsx)(d.Z,{onClick:()=>{v(!0),y(null),r("logDrink",()=>{e.push("/log-drink")}).catch(e=>{y(e.message)}).finally(()=>{v(!1)})},disabled:x,sx:{width:"100%",height:{xs:"220px",sm:"300px"},borderRadius:"50%",fontSize:{xs:"1.5rem",sm:"2rem"},fontWeight:500,background:"linear-gradient(135deg, var(--beer-amber) 0%, var(--copper) 100%)",color:"var(--dark-wood)","&:hover":{background:"linear-gradient(135deg, var(--copper-light) 0%, var(--copper) 100%)",transform:"scale(1.05)",boxShadow:"0 12px 40px rgba(0,0,0,0.4)"},"&:active":{transform:"scale(0.95)",boxShadow:"0 6px 20px rgba(0,0,0,0.3)"},boxShadow:"0 8px 32px rgba(0,0,0,0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,mb:2,"&.Mui-disabled":{background:"linear-gradient(135deg, var(--beer-amber) 0%, var(--copper) 100%)",opacity:.7}},children:x?(0,n.jsx)(u.Z,{size:60,sx:{color:"var(--dark-wood)",opacity:.8}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{sx:{fontSize:{xs:"4rem",sm:"5rem"},filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.2))",transition:"all 0.3s ease"}}),"Log a Beer"]})}),(0,n.jsx)(C,{userId:null==t?void 0:t.uid,onSuccess:e=>{j(e),Z(!0)},onError:e=>{y(e)}})]}),(0,n.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"center",gap:2,position:"relative",zIndex:2},children:[(0,n.jsx)(d.Z,{component:k(),href:"/map",variant:"text",sx:{color:"var(--text-primary)","&:hover":{color:"var(--beer-amber)"}},children:"View Map"}),(0,n.jsx)(d.Z,{component:k(),href:"/friends",variant:"text",sx:{color:"var(--text-primary)","&:hover":{color:"var(--beer-amber)"}},children:"Friends"})]})]}),(0,n.jsx)(c.Z,{variant:"body2",sx:{position:"absolute",bottom:"20px",color:"var(--text-secondary)",textAlign:"center",width:"100%"},children:"Made with \uD83C\uDF7A for beer lovers"}),(0,n.jsx)(m.Z,{open:w,autoHideDuration:3e3,onClose:()=>Z(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(l.Z,{onClose:()=>Z(!1),severity:"success",sx:{width:"100%"},children:D})}),(0,n.jsx)(g.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.8)"},open:x,children:(0,n.jsx)(u.Z,{color:"inherit"})})]})]})}},9008:function(e,r,t){e.exports=t(14764)}},function(e){e.O(0,[354,774,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);