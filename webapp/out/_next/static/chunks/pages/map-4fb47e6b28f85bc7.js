(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{64284:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return n(7143)}])},7143:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return W}});var t=n(85893),a=n(67294),l=n(5616),i=n(98456),s=n(86886),o=n(46656),d=n(69417),c=n(2734),h=n(61730),u=n(15861),p=n(65582),x=n(57922),m=n(94054),g=n(33841),b=n(85945),j=n(18972),v=n(61903),Z=n(50480),f=n(45843),k=n(7415),y=n(50720),C=n(17389),D=n(91680),P=n(6571),w=n(56143),A=n(59655),S=n(90948),M=n(24641),T=n(5152),O=n.n(T),E=n(90109),_=n(42498),I=n(92098);let B=O()(()=>Promise.all([n.e(634),n.e(815),n.e(742)]).then(n.bind(n,63742)),{loadableGenerated:{webpack:()=>[63742]},ssr:!1,loading:()=>(0,t.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",bgcolor:"#121212"},children:(0,t.jsx)(i.Z,{sx:{color:"var(--beer-amber)"}})})}),z=(0,S.ZP)(l.Z)(e=>{let{theme:r}=e;return{width:"100%",padding:r.spacing(2),background:"var(--glass-background)",backdropFilter:"blur(10px)",borderBottom:"1px solid var(--glass-border)",transition:"all 0.3s ease",borderRadius:"12px",marginBottom:r.spacing(2)}}),R=(0,S.ZP)(s.ZP)(e=>{let{theme:r}=e;return{gap:r.spacing(2),[r.breakpoints.down("sm")]:{gap:r.spacing(1)}}});(0,S.ZP)(o.ZP)({color:"var(--beer-amber)","& .MuiSlider-thumb":{backgroundColor:"var(--beer-amber)"},"& .MuiSlider-track":{backgroundColor:"var(--beer-amber)"},"& .MuiSlider-rail":{backgroundColor:"var(--glass-border)"}});let F=(0,S.ZP)(d.Z)(e=>{let{theme:r}=e;return{width:"100%",marginBottom:r.spacing(2),justifyContent:"flex-start",padding:r.spacing(1,2),background:"var(--glass-background)",backdropFilter:"blur(10px)",border:"1px solid var(--glass-border)",borderRadius:"12px",color:"var(--text-primary)","&:hover":{background:"var(--glass-background)",opacity:.9}}});function W(){let{user:e}=(0,I.a)(),[r,n]=(0,a.useState)([]),[o,S]=(0,a.useState)([]),[T,O]=(0,a.useState)(null),[W,H]=(0,a.useState)(!0),[L,N]=(0,a.useState)(null),[V,J]=(0,a.useState)([]),[X,G]=(0,a.useState)([]),[U,q]=(0,a.useState)({drinkType:["All Drink Types"],container:["All Containers"],brand:["All Brands"],rating:["All Ratings"],startDate:null,endDate:null,method:["All Methods"]}),[K,Q]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(0),[ee,er]=(0,a.useState)(!1),[en,et]=(0,a.useState)([]),[ea,el]=(0,a.useState)(""),[ei,es]=(0,a.useState)([]),[eo,ed]=(0,a.useState)(!0),[ec,eh]=(0,a.useState)({drinkType:null,container:null,brand:null,method:null,rating:null}),eu=(0,c.Z)();(0,h.Z)(eu.breakpoints.down("sm")),(0,a.useEffect)(()=>{(async()=>{if(e)try{let r=(0,E.IO)((0,E.hJ)(_.db,"drinks"),(0,E.ar)("userId","==",e.uid)),t=(await (0,E.PL)(r)).docs.map(e=>({id:e.id,...e.data()})),a=[];if(e.friends&&e.friends.length>0){let r=(0,E.IO)((0,E.hJ)(_.db,"drinks"),(0,E.ar)("userId","in",e.friends));a=(await (0,E.PL)(r)).docs.map(e=>({id:e.id,...e.data()}))}n(t),S(a)}catch(e){console.error("Error fetching drinks:",e),N("Failed to load drinks data")}finally{H(!1)}})()},[e]),(0,a.useEffect)(()=>{if(r.length>0){let e=[...new Set(r.map(e=>e.brand).filter(e=>e&&""!==e.trim()))].sort();et(e),es(e),J([...new Set(r.map(e=>e.containerType).filter(e=>e&&""!==e.trim()))].sort()),G([...new Set(r.map(e=>e.method).filter(e=>e&&""!==e.trim()))].sort())}},[r]);let ep=(e,r)=>{q(n=>{let t={...n};return Array.isArray(r)?t[e]=r:t[e]=[r],t})},ex=(e,r)=>{eh(n=>({...n,[r]:e.currentTarget}))},em=e=>{eh(r=>({...r,[e]:null}))},eg=r.filter(e=>(U.drinkType.includes("All Drink Types")||U.drinkType.includes(e.type))&&(U.container.includes("All Containers")||U.container.includes(e.containerType))&&(U.brand.includes("All Brands")||U.brand.includes(e.brand))&&(U.rating.includes("All Ratings")||U.rating.includes(e.rating))&&(U.method.includes("All Methods")||U.method.includes(e.method))&&(!U.startDate||new Date(e.timestamp.toDate())>=U.startDate)&&(!U.endDate||new Date(e.timestamp.toDate())<=U.endDate)),eb=o.filter(e=>{var r;return!("All Drink Types"!==U.drinkType&&e.type!==U.drinkType||U.container&&e.container!==U.container||U.brand&&!(null===(r=e.brand)||void 0===r?void 0:r.toLowerCase().includes(U.brand.toLowerCase()))||U.rating&&e.rating!==parseInt(U.rating)||U.startDate&&new Date(e.timestamp)<U.startDate||U.endDate&&new Date(e.timestamp)>U.endDate)});return W?(0,t.jsx)(M.Z,{children:(0,t.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 64px)",bgcolor:"#121212"},children:(0,t.jsx)(i.Z,{sx:{color:"var(--beer-amber)"}})})}):L?(0,t.jsx)(M.Z,{children:(0,t.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 64px)",bgcolor:"#121212",color:"var(--text-primary)",flexDirection:"column",gap:2,p:3},children:[(0,t.jsx)(u.Z,{variant:"h6",align:"center",children:L}),(0,t.jsx)(u.Z,{variant:"body2",align:"center",color:"var(--text-secondary)",children:"Please try refreshing the page or contact support if the problem persists."})]})}):(0,t.jsx)(M.Z,{children:(0,t.jsx)(p.Z,{maxWidth:"xl",sx:{py:2},children:(0,t.jsxs)(l.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2},children:[(0,t.jsxs)(F,{onClick:()=>Q(!K),startIcon:K?(0,t.jsx)(D.Z,{}):(0,t.jsx)(P.Z,{}),endIcon:(0,t.jsx)(w.Z,{}),children:["Filters ",Y>0&&"(".concat(Y,")")]}),(0,t.jsx)(x.Z,{in:K,children:(0,t.jsx)(z,{children:(0,t.jsxs)(R,{container:!0,spacing:2,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(m.Z,{fullWidth:!0,children:[(0,t.jsx)(g.Z,{children:"Drink Type"}),(0,t.jsxs)(b.Z,{multiple:!0,value:U.drinkType,onChange:e=>ep("drinkType",e.target.value),label:"Drink Type",renderValue:e=>e.join(", "),onOpen:e=>ex(e,"drinkType"),onClose:()=>em("drinkType"),MenuProps:{PaperProps:{style:{maxHeight:300,width:250}},anchorEl:ec.drinkType,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:[(0,t.jsx)(j.Z,{value:"All Drink Types",children:"All Drink Types"}),(0,t.jsx)(j.Z,{value:"beer",children:"Beer"}),(0,t.jsx)(j.Z,{value:"wine",children:"Wine"}),(0,t.jsx)(j.Z,{value:"spirits",children:"Spirits"}),(0,t.jsx)(j.Z,{value:"cocktail",children:"Cocktail"})]})]})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(m.Z,{fullWidth:!0,children:[(0,t.jsx)(g.Z,{children:"Container"}),(0,t.jsxs)(b.Z,{multiple:!0,value:U.container,onChange:e=>ep("container",e.target.value),label:"Container",renderValue:e=>e.join(", "),onOpen:e=>ex(e,"container"),onClose:()=>em("container"),MenuProps:{PaperProps:{style:{maxHeight:300,width:250}},anchorEl:ec.container,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:[(0,t.jsx)(j.Z,{value:"All Containers",children:"All Containers"}),V.map(e=>(0,t.jsx)(j.Z,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(m.Z,{fullWidth:!0,children:[(0,t.jsx)(g.Z,{children:"Brand"}),(0,t.jsxs)(b.Z,{multiple:!0,value:U.brand,onChange:e=>ep("brand",e.target.value),label:"Brand",renderValue:e=>e.join(", "),onOpen:e=>ex(e,"brand"),onClose:()=>em("brand"),MenuProps:{PaperProps:{style:{maxHeight:300,width:250}},anchorEl:ec.brand,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:[(0,t.jsx)(j.Z,{value:"All Brands",children:"All Brands"}),en.map(e=>(0,t.jsx)(j.Z,{value:e,children:e},e))]})]})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(m.Z,{fullWidth:!0,children:[(0,t.jsx)(g.Z,{children:"Method"}),(0,t.jsxs)(b.Z,{multiple:!0,value:U.method,onChange:e=>ep("method",e.target.value),label:"Method",renderValue:e=>e.join(", "),onOpen:e=>ex(e,"method"),onClose:()=>em("method"),MenuProps:{PaperProps:{style:{maxHeight:300,width:250}},anchorEl:ec.method,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:[(0,t.jsx)(j.Z,{value:"All Methods",children:"All Methods"}),X.map(e=>(0,t.jsx)(j.Z,{value:e,children:e},e))]})]})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsxs)(m.Z,{fullWidth:!0,children:[(0,t.jsx)(g.Z,{children:"Rating"}),(0,t.jsxs)(b.Z,{multiple:!0,value:U.rating,onChange:e=>ep("rating",e.target.value),label:"Rating",renderValue:e=>e.join(", "),onOpen:e=>ex(e,"rating"),onClose:()=>em("rating"),MenuProps:{PaperProps:{style:{maxHeight:300,width:250}},anchorEl:ec.rating,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:[(0,t.jsx)(j.Z,{value:"All Ratings",children:"All Ratings"}),[1,2,3,4,5].map(e=>(0,t.jsxs)(j.Z,{value:e,children:[e," Stars"]},e))]})]})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsx)(y._,{dateAdapter:k.H,children:(0,t.jsx)(C.M,{label:"Start Date",value:U.startDate,onChange:e=>ep("startDate",e),renderInput:e=>(0,t.jsx)(v.Z,{...e,fullWidth:!0})})})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsx)(y._,{dateAdapter:k.H,children:(0,t.jsx)(C.M,{label:"End Date",value:U.endDate,onChange:e=>ep("endDate",e),renderInput:e=>(0,t.jsx)(v.Z,{...e,fullWidth:!0})})})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,t.jsx)(Z.Z,{control:(0,t.jsx)(f.Z,{checked:eo,onChange:()=>ed(!eo),sx:{color:"var(--beer-amber)","&.Mui-checked":{color:"var(--beer-amber)"}}}),label:"Show Friend Logs",sx:{color:"var(--text-primary)","& .MuiFormControlLabel-label":{color:"var(--text-primary)"}}})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,children:(0,t.jsx)(l.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:2},children:(0,t.jsx)(d.Z,{variant:"outlined",startIcon:(0,t.jsx)(A.Z,{}),onClick:()=>{q({drinkType:["All Drink Types"],container:["All Containers"],brand:["All Brands"],rating:["All Ratings"],startDate:null,endDate:null,method:["All Methods"]})},disabled:0===Y,sx:{borderColor:"var(--glass-border)",color:"var(--text-primary)",backgroundColor:"var(--glass-background)","&:hover":{borderColor:"var(--beer-amber)",color:"var(--beer-amber)",backgroundColor:"var(--glass-background)"},"&.Mui-disabled":{color:"var(--text-secondary)"}},children:"Clear Filters"})})})]})})}),(0,t.jsx)(l.Z,{sx:{height:"calc(100vh - 300px)",width:"100%",position:"relative",bgcolor:"#121212",borderRadius:"12px",overflow:"hidden"},children:(0,t.jsx)(B,{drinks:eg,friendDrinks:eo?eb:[],selectedDrink:T,setSelectedDrink:O,handleMouseMove:e=>{},getMarkerSize:e=>Math.max(20,Math.min(40,2*e)),getMarkerColor:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return"friend"===r?"#4CAF50":"#FBC02D"}})})]})})})}}},function(e){e.O(0,[903,738,294,739,869,886,842,700,774,888,179],function(){return e(e.s=64284)}),_N_E=e.O()}]);