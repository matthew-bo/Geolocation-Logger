(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{19344:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return n(13247)}])},13247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eh}});var r=n(85893),a=n(67294),o=n(11163);n(41664);var l=n(5616),s=n(98456),i=n(46901),c=n(65582),d=n(66242),u=n(69661),x=n(15861),m=n(86886),h=n(78462),p=n(9875),v=n(93946),b=n(67720),y=n(64666),g=n(37645),j=n(6514),Z=n(58951),f=n(31425),w=n(69417),k=n(75244),C=n(36400),N=n(53630),S=n(46761),D=n(92098),T=n(42498),I=n(90109),M=n(34386),A=n(44267),P=n(591),B=n(47120),E=n(94054),U=n(33841),O=n(85945),_=n(18972),z=n(66672),L=n(61903),R=n(5970),F=n(26495),q=n(23148),W=n(75108),J=n(63252),H=n(49185),Y=n(92759),V=n(64232),X=n(93429),G=n(96406),Q=n(584),$=n(43703),K=n(67090),ee=n(4135),et=n(9005),en=n(20466),er=n(32912),ea=n(51085),eo=n(82644),el=n(49160);q.kL.register(q.uw,q.f$,q.ZL,q.Dx,q.u,q.De);let es=[{value:"week",label:"Past Week"},{value:"month",label:"Past Month"},{value:"3months",label:"Past 3 Months"},{value:"year",label:"Past Year"}],ei=[{value:"total",label:"Total Drinks"},{value:"unique",label:"Unique Beers"},{value:"rating",label:"Average Rating"}],ec=[{value:"day",label:"By Day"},{value:"week",label:"By Week"},{value:"month",label:"By Month"}],ed=e=>{let{data:t,metric:n,currentDate:o,setCurrentDate:s}=e,i=(0,a.useMemo)(()=>{let e=(0,Q.Z)((0,$.Z)(o)),t=(0,K.Z)((0,ee.Z)(o)),n=(0,et.Z)({start:e,end:t}),r=[],a=[];if(n.forEach(e=>{if(0===a.length&&0!==(0,en.Z)(e))for(let t=0;t<(0,en.Z)(e);t++)a.push(null);a.push(e),6===(0,en.Z)(e)&&(r.push(a),a=[])}),a.length>0){for(;a.length<7;)a.push(null);r.push(a)}return r},[o]),c=e=>e?t[(0,er.Z)(e,"yyyy-MM-dd")]||0:null,d=Math.max(...Object.values(t));return(0,r.jsxs)(l.Z,{sx:{width:"100%",p:{xs:1,sm:2}},children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,r.jsx)(v.Z,{onClick:()=>s(new Date(o.getFullYear(),o.getMonth()-1)),size:"small",children:(0,r.jsx)(x.Z,{variant:"body2",children:"←"})}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:(0,er.Z)(o,"MMMM yyyy")}),(0,r.jsx)(v.Z,{onClick:()=>s(new Date(o.getFullYear(),o.getMonth()+1)),size:"small",children:(0,r.jsx)(x.Z,{variant:"body2",children:"→"})})]}),(0,r.jsx)(m.ZP,{container:!0,spacing:.5,children:["S","M","T","W","T","F","S"].map(e=>(0,r.jsx)(m.ZP,{item:!0,xs:12/7,children:(0,r.jsx)(x.Z,{align:"center",sx:{color:"var(--text-secondary)",fontSize:"0.7rem"},children:e})},e))}),(0,r.jsx)(l.Z,{sx:{mt:.5},children:i.map((e,t)=>(0,r.jsx)(m.ZP,{container:!0,spacing:.5,children:e.map((e,t)=>(0,r.jsx)(m.ZP,{item:!0,xs:12/7,children:e&&(0,r.jsx)(M.Z,{title:"".concat((0,er.Z)(e,"MMM d, yyyy"),"\n").concat(c(e)," ").concat("total"===n?"drinks":"unique"===n?"unique beers":"avg rating"),children:(0,r.jsxs)(l.Z,{sx:{aspectRatio:"1",p:.5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:.5,cursor:"pointer",position:"relative",bgcolor:(0,ea.Z)(e)?"var(--beer-amber)":(0,eo.Z)(e)?"transparent":"rgba(251, 192, 45, ".concat(c(e)/(d||1)*.7,")"),border:t=>(0,el.Z)(e,o)&&(0,ea.Z)(e)?"1px solid var(--copper)":"1px solid var(--border-color)",opacity:(0,el.Z)(e,o)?1:.3,"&:hover":{bgcolor:"var(--beer-amber)",opacity:.8},minHeight:{xs:24,sm:32}},children:[(0,r.jsx)(x.Z,{sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},color:(0,ea.Z)(e)?"#000":"var(--text-primary)",fontWeight:(0,ea.Z)(e)?"bold":"normal",lineHeight:1},children:(0,er.Z)(e,"d")}),c(e)>0&&(0,r.jsx)(x.Z,{sx:{fontSize:{xs:"0.6rem",sm:"0.65rem"},color:(0,ea.Z)(e)?"#000":"var(--text-secondary)",lineHeight:1,mt:.25},children:c(e)})]})})},t))},t))})]})};function eu(e){var t,n;let{drinks:o}=e,[s,c]=(0,a.useState)("month"),[u,x]=(0,a.useState)("total"),[h,p]=(0,a.useState)("day"),[b,Z]=(0,a.useState)(null),[k,C]=(0,a.useState)("bar"),[N,S]=(0,a.useState)(!1),[D,T]=(0,a.useState)(!1),[I,q]=(0,a.useState)(""),[$,K]=(0,a.useState)(new Date),ee=(0,a.useMemo)(()=>{let e=new Set;return o.forEach(t=>{var n,r,a;(null===(n=t.placeInfo)||void 0===n?void 0:n.city)&&e.add(t.placeInfo.city),(null===(r=t.placeInfo)||void 0===r?void 0:r.state)&&e.add(t.placeInfo.state),(null===(a=t.placeInfo)||void 0===a?void 0:a.country)&&e.add(t.placeInfo.country)}),Array.from(e)},[o]),et=(0,a.useMemo)(()=>{let e=new Date,t=new Date;switch(s){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"3months":t.setMonth(e.getMonth()-3);break;case"year":t.setFullYear(e.getFullYear()-1)}let n=o.filter(n=>{var r,a,o;let l=new Date(n.timestamp),s=!b||(null===(r=n.placeInfo)||void 0===r?void 0:r.city)===b||(null===(a=n.placeInfo)||void 0===a?void 0:a.state)===b||(null===(o=n.placeInfo)||void 0===o?void 0:o.country)===b;return l>=t&&l<=e&&s}),r={};n.forEach(e=>{let t;let n=new Date(e.timestamp);switch(h){case"day":t=(0,er.Z)(n,"yyyy-MM-dd");break;case"week":let a=(0,Q.Z)(n);t=(0,er.Z)(a,"yyyy-MM-dd");break;case"month":t=(0,er.Z)(n,"yyyy-MM")}r[t]||(r[t]={drinks:[],uniqueBeers:new Set,ratings:[]}),r[t].drinks.push(e),r[t].uniqueBeers.add(e.brand),e.rating&&r[t].ratings.push(e.rating)});let a=Object.keys(r).sort(),l=a.map(e=>{let t=r[e];switch(u){case"total":return t.drinks.length;case"unique":return t.uniqueBeers.size;case"rating":return t.ratings.length>0?t.ratings.reduce((e,t)=>e+t)/t.ratings.length:0}}),i={};return Object.entries(r).forEach(e=>{let[t,n]=e;i[t]="total"===u?n.drinks.length:"unique"===u?n.uniqueBeers.size:n.ratings.length>0?n.ratings.reduce((e,t)=>e+t)/n.ratings.length:0}),{labels:a,data:l,calendarData:i}},[o,s,u,h,b]),en={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"".concat((null===(t=ei.find(e=>e.value===u))||void 0===t?void 0:t.label)||""," ").concat((null===(n=ec.find(e=>e.value===h))||void 0===n?void 0:n.label)||""),color:"var(--text-primary)",font:{size:16,weight:"normal"}},tooltip:{callbacks:{label:e=>"rating"===u?"Rating: ".concat(e.raw.toFixed(1)):"".concat(e.raw," ").concat("total"===u?"drinks":"beers")}}},scales:{y:{beginAtZero:!0,ticks:{precision:"rating"===u?1:0,color:"var(--text-secondary)"},grid:{color:"var(--border-color)",drawBorder:!1}},x:{ticks:{color:"var(--text-secondary)"},grid:{display:!1}}}},ea={labels:et.labels.map(e=>"month"===h?(0,er.Z)(new Date(e),"MMM yyyy"):(0,er.Z)(new Date(e),"MMM d")),datasets:[{data:et.data,backgroundColor:"rgba(251, 192, 45, 0.6)",borderColor:"var(--copper)",borderWidth:1,borderRadius:4,hoverBackgroundColor:"var(--beer-amber)"}]},eo=async e=>{var t,n;let r="Check out my beer stats: ".concat(null===(t=ei.find(e=>e.value===u))||void 0===t?void 0:t.label," ").concat(null===(n=ec.find(e=>e.value===h))||void 0===n?void 0:n.label),a=window.location.href;switch(e){case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(a)),"_blank");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(a)),"_blank");break;case"whatsapp":window.open("https://wa.me/?text=".concat(encodeURIComponent(r+" "+a)),"_blank");break;case"copy":try{await navigator.clipboard.writeText(a),q("Link copied to clipboard!"),T(!0)}catch(e){q("Failed to copy link"),T(!0)}}S(!1)};return(0,r.jsx)(d.Z,{className:"premium-card",sx:{overflow:"visible"},children:(0,r.jsxs)(A.Z,{children:[(0,r.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:2},children:[(0,r.jsxs)(P.Z,{value:k,exclusive:!0,onChange:(e,t)=>t&&C(t),size:"small",sx:{"& .MuiToggleButton-root":{color:"var(--text-secondary)","&.Mui-selected":{color:"var(--beer-amber)",bgcolor:"rgba(251, 192, 45, 0.1)"}}},children:[(0,r.jsx)(B.Z,{value:"bar",children:(0,r.jsx)(M.Z,{title:"Bar Chart",children:(0,r.jsx)(W.Z,{})})}),(0,r.jsx)(B.Z,{value:"calendar",children:(0,r.jsx)(M.Z,{title:"Calendar View",children:(0,r.jsx)(J.Z,{})})})]}),(0,r.jsx)(v.Z,{onClick:()=>S(!0),sx:{color:"var(--text-secondary)"},children:(0,r.jsx)(H.Z,{})})]}),(0,r.jsxs)(m.ZP,{container:!0,spacing:2,sx:{mb:2},children:["bar"===k&&(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(E.Z,{fullWidth:!0,size:"small",children:[(0,r.jsx)(U.Z,{children:"Time Frame"}),(0,r.jsx)(O.Z,{value:s,label:"Time Frame",onChange:e=>c(e.target.value),children:es.map(e=>(0,r.jsx)(_.Z,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(E.Z,{fullWidth:!0,size:"small",children:[(0,r.jsx)(U.Z,{children:"Metric"}),(0,r.jsx)(O.Z,{value:u,label:"Metric",onChange:e=>x(e.target.value),children:ei.map(e=>(0,r.jsx)(_.Z,{value:e.value,children:e.label},e.value))})]})}),"bar"===k&&(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(E.Z,{fullWidth:!0,size:"small",children:[(0,r.jsx)(U.Z,{children:"Group By"}),(0,r.jsx)(O.Z,{value:h,label:"Group By",onChange:e=>p(e.target.value),children:ec.map(e=>(0,r.jsx)(_.Z,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsx)(z.Z,{size:"small",value:b,onChange:(e,t)=>Z(t),options:ee,renderInput:e=>(0,r.jsx)(L.Z,{...e,label:"Filter by Location",fullWidth:!0})})})]}),(0,r.jsx)(l.Z,{sx:{height:{xs:300,sm:400}},children:"bar"===k?(0,r.jsx)(F.$Q,{options:en,data:ea}):(0,r.jsx)(ed,{data:et.calendarData,metric:u,currentDate:$,setCurrentDate:K})}),(0,r.jsxs)(y.Z,{open:N,onClose:()=>S(!1),PaperProps:{sx:{bgcolor:"var(--background)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}},children:[(0,r.jsx)(g.Z,{children:"Share Stats"}),(0,r.jsx)(j.Z,{children:(0,r.jsxs)(m.ZP,{container:!0,spacing:2,sx:{mt:1},children:[(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsx)(v.Z,{onClick:()=>eo("facebook"),sx:{color:"#1877f2"},children:(0,r.jsx)(Y.Z,{})})}),(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsx)(v.Z,{onClick:()=>eo("twitter"),sx:{color:"#1da1f2"},children:(0,r.jsx)(V.Z,{})})}),(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsx)(v.Z,{onClick:()=>eo("whatsapp"),sx:{color:"#25d366"},children:(0,r.jsx)(X.Z,{})})}),(0,r.jsx)(m.ZP,{item:!0,xs:3,children:(0,r.jsx)(v.Z,{onClick:()=>eo("copy"),sx:{color:"var(--text-primary)"},children:(0,r.jsx)(G.Z,{})})})]})}),(0,r.jsx)(f.Z,{children:(0,r.jsx)(w.Z,{onClick:()=>S(!1),sx:{color:"var(--text-secondary)"},children:"Close"})})]}),(0,r.jsx)(R.Z,{open:D,autoHideDuration:3e3,onClose:()=>T(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,r.jsx)(i.Z,{onClose:()=>T(!1),severity:"success",sx:{width:"100%"},children:I})})]})})}var ex=n(84105);let em={safeFormatTimestamp(e){try{let t;if(!e)return"N/A";if("function"==typeof e.toDate)t=e.toDate();else if(e._seconds)t=new Date(1e3*e._seconds);else if("string"==typeof e)t=new Date(e);else if(e instanceof Date)t=e;else{if("number"!=typeof e)return"N/A";t=new Date(e)}if(isNaN(t.getTime()))return"N/A";return t.toISOString()}catch(e){return console.warn("Error formatting timestamp:",e),"N/A"}},exportToExcel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e||0===e.length){console.warn("No data to export");return}let n=new Date().toISOString().split("T")[0];t=t||"".concat(n,"-drink-log.xlsx");let r=e.map(e=>{var t,n,r,a,o,l;let s=this.safeFormatTimestamp(e.timestamp),i="N/A"!==s?s.split("T")[0]:"N/A",c="N/A"!==s?s.split("T")[1].split(".")[0]:"N/A",d=(null===(t=e.location)||void 0===t?void 0:t.lat)||(null===(r=e.location)||void 0===r?void 0:null===(n=r.coordinates)||void 0===n?void 0:n[1])||"N/A",u=(null===(a=e.location)||void 0===a?void 0:a.lng)||(null===(l=e.location)||void 0===l?void 0:null===(o=l.coordinates)||void 0===o?void 0:o[0])||"N/A";return{Brand:e.brand||"Unknown",Type:e.drinkType||"Unknown",Container:e.containerType||e.container||"Unknown",Amount:e.amount||"Unknown",Rating:e.rating||"N/A",Date:i,Time:c,Timestamp:s,Latitude:d,Longitude:u,Notes:e.notes||"","Added By":e.username||"Me"}}),a=ex.P6.json_to_sheet(r),o=ex.P6.book_new();ex.P6.book_append_sheet(o,a,"Drinks");let l=(0,ex.cW)(o,{bookType:"xlsx",type:"array"}),s=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(s),c=document.createElement("a");c.href=i,c.setAttribute("download",t),document.body.appendChild(c),c.click(),document.body.removeChild(c)}catch(e){console.error("Error exporting to Excel:",e)}},exportToCsv:e=>{try{if(!e||0===e.length){console.warn("No data to export");return}let t=new Date().toISOString().split("T")[0],n=e.map(e=>{var t,n,r,a,o,l;let s=(void 0).safeFormatTimestamp(e.timestamp),i="N/A"!==s?s.split("T")[0]:"N/A",c="N/A"!==s?s.split("T")[1].split(".")[0]:"N/A",d=(null===(t=e.location)||void 0===t?void 0:t.lat)||(null===(r=e.location)||void 0===r?void 0:null===(n=r.coordinates)||void 0===n?void 0:n[1])||"N/A",u=(null===(a=e.location)||void 0===a?void 0:a.lng)||(null===(l=e.location)||void 0===l?void 0:null===(o=l.coordinates)||void 0===o?void 0:o[0])||"N/A";return{Brand:e.brand||"Unknown",Type:e.drinkType||"Unknown",Container:e.containerType||e.container||"Unknown",Amount:e.amount||"Unknown",Rating:e.rating||"N/A",Date:i,Time:c,Timestamp:s,Latitude:d,Longitude:u,Notes:(e.notes||"").replace(/,/g," ")}}),r=Object.keys(n[0]).join(","),a=n.map(e=>Object.values(e).join(",")),o="data:text/csv;charset=utf-8,"+[r,...a].join("\n"),l=encodeURI(o),s=document.createElement("a");s.setAttribute("href",l),s.setAttribute("download","".concat(t,"-drink-log.csv")),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){console.error("Error exporting to CSV:",e)}},exportToJson:e=>{try{if(!e||0===e.length){console.warn("No data to export");return}let t=new Date().toISOString().split("T")[0],n=e.map(e=>{let t=(void 0).safeFormatTimestamp(e.timestamp),n="N/A"!==t?t.split("T")[0]:null,r="N/A"!==t?t.split("T")[1].split(".")[0]:null,a={};if(e.location){var o,l;a.lat=e.location.lat||(null===(o=e.location.coordinates)||void 0===o?void 0:o[1])||null,a.lng=e.location.lng||(null===(l=e.location.coordinates)||void 0===l?void 0:l[0])||null}return{id:e.id,brand:e.brand||null,drinkType:e.drinkType||null,containerType:e.containerType||e.container||null,amount:e.amount||null,rating:e.rating||null,date:n,time:r,timestamp:"N/A"!==t?t:null,location:e.location?a:null,notes:e.notes||null}}),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),o=URL.createObjectURL(a),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download","".concat(t,"-drink-log.json")),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}catch(e){console.error("Error exporting to JSON:",e)}}};function eh(){var e,t,n,M,A;let{user:P}=(0,D.a)(),{userId:B}=(0,o.useRouter)().query,[E,U]=(0,a.useState)({totalDrinks:0,uniqueBeers:0,favoriteBeer:null,totalOunces:0,friends:0}),[O,_]=(0,a.useState)(null),[z,L]=(0,a.useState)([]),[R,F]=(0,a.useState)(!0),[q,W]=(0,a.useState)(null),[J,H]=(0,a.useState)(!1),[Y,V]=(0,a.useState)(null),[X,G]=(0,a.useState)(!1),[Q,$]=(0,a.useState)([]),K=!B||B===(null==P?void 0:P.uid),ee=B||(null==P?void 0:P.uid);(0,a.useEffect)(()=>{ee&&(et(),ea())},[ee]);let et=async()=>{F(!0),W(null);try{await Promise.all([en(),es(),er()])}catch(e){console.error("Error fetching user data:",e),W("Failed to load profile data. Please try again later.")}finally{F(!1)}},en=async()=>{try{let e=(0,I.JU)(T.db,"users",ee),t=await (0,I.QT)(e);t.exists()&&_(t.data())}catch(e){throw console.error("Error fetching user profile:",e),e}},er=async()=>{try{let e=(0,I.IO)((0,I.hJ)(T.db,"drinks"),(0,I.ar)("userId","==",ee),(0,I.Xo)("timestamp","desc"),(0,I.b9)(10)),t=(await (0,I.PL)(e)).docs.map(e=>{let t;let n=e.data();return t=n.timestamp?"function"==typeof n.timestamp.toDate?n.timestamp.toDate():new Date(n.timestamp._seconds?1e3*n.timestamp._seconds:n.timestamp):new Date,{id:e.id,...n,timestamp:t}});L(t)}catch(e){throw console.error("Error fetching recent drinks:",e),e}},ea=async()=>{try{let e=(0,I.IO)((0,I.hJ)(T.db,"drinks"),(0,I.ar)("userId","==",ee)),t=(await (0,I.PL)(e)).docs.map(e=>{let t;let n=e.data();return t=n.timestamp?"function"==typeof n.timestamp.toDate?n.timestamp.toDate():new Date(n.timestamp._seconds?1e3*n.timestamp._seconds:n.timestamp):new Date,{id:e.id,...n,timestamp:t.toISOString()}});$(t)}catch(e){throw console.error("Error fetching all drinks:",e),e}},eo=e=>{V(e),H(!0)},el=async()=>{if(Y){G(!0);try{await (0,I.oe)((0,I.JU)(T.db,"drinks",Y.id)),L(z.filter(e=>e.id!==Y.id)),es()}catch(e){console.error("Error deleting drink:",e),W("Failed to delete drink. Please try again.")}finally{G(!1),H(!1),V(null)}}},es=async()=>{try{var e;let t=(0,I.IO)((0,I.hJ)(T.db,"drinks"),(0,I.ar)("userId","==",ee)),n=(await (0,I.PL)(t)).docs.map(e=>e.data()),r=[...new Set(n.map(e=>e.brand))],a=n.reduce((e,t)=>(e[t.brand]=(e[t.brand]||0)+1,e),{}),o=n.reduce((e,t)=>e+(t.amount||0),0),l=(null===(e=Object.entries(a).sort((e,t)=>{let[,n]=e,[,r]=t;return r-n})[0])||void 0===e?void 0:e[0])||null;U({totalDrinks:n.length,uniqueBeers:r.length,favoriteBeer:l,totalOunces:o,friends:0})}catch(e){throw console.error("Error fetching user stats:",e),e}},ei=e=>{switch(e){case"excel":em.exportToExcel(Q);break;case"csv":em.exportToCsv(Q);break;case"json":em.exportToJson(Q);break;default:console.error("Unsupported export format")}};return R?(0,r.jsx)(l.Z,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,r.jsx)(s.Z,{})}):q?(0,r.jsx)(i.Z,{severity:"error",sx:{mt:2},children:q}):(0,r.jsx)(l.Z,{sx:{minHeight:"100vh",pt:10,px:2},children:(0,r.jsxs)(c.Z,{maxWidth:"lg",children:[(0,r.jsx)(d.Z,{className:"glass-card",sx:{mb:4,position:"relative"},children:(0,r.jsxs)(l.Z,{sx:{p:3,textAlign:"center"},children:[(0,r.jsx)(u.Z,{sx:{width:120,height:120,mx:"auto",mb:2,bgcolor:"var(--beer-amber)",fontSize:"2.5rem"},children:(null==O?void 0:null===(t=O.username)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase())||(null==O?void 0:null===(M=O.email)||void 0===M?void 0:null===(n=M[0])||void 0===n?void 0:n.toUpperCase())}),(0,r.jsx)(x.Z,{variant:"h4",gutterBottom:!0,children:(null==O?void 0:O.username)||"Anonymous Beer Lover"}),(0,r.jsxs)(x.Z,{variant:"body1",color:"textSecondary",children:["Member since ",(A=null==O?void 0:O.createdAt)?new Date(A).toLocaleDateString():"N/A"]})]})}),(0,r.jsxs)(m.ZP,{container:!0,spacing:3,mb:4,children:[(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(l.Z,{className:"stat-card",children:[(0,r.jsx)(k.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,r.jsx)(x.Z,{className:"stat-value",children:E.totalDrinks}),(0,r.jsx)(x.Z,{className:"stat-label",children:"Total Beers"})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(l.Z,{className:"stat-card",children:[(0,r.jsx)(k.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,r.jsx)(x.Z,{className:"stat-value",children:E.uniqueBeers}),(0,r.jsx)(x.Z,{className:"stat-label",children:"Unique Beers"})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(l.Z,{className:"stat-card",children:[(0,r.jsx)(k.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,r.jsx)(x.Z,{className:"stat-value",children:E.totalOunces}),(0,r.jsx)(x.Z,{className:"stat-label",children:"Total Ounces"})]})}),(0,r.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,r.jsxs)(l.Z,{className:"stat-card",children:[(0,r.jsx)(C.Z,{sx:{fontSize:40,color:"var(--beer-amber)",mb:1}}),(0,r.jsx)(x.Z,{className:"stat-value",children:E.favoriteBeer||"None"}),(0,r.jsx)(x.Z,{className:"stat-label",children:"Favorite Beer"})]})})]}),(0,r.jsxs)(l.Z,{sx:{mt:4,mb:4},children:[(0,r.jsx)(x.Z,{variant:"h5",gutterBottom:!0,children:"Drink Analytics"}),(0,r.jsx)(eu,{drinks:z})]}),(0,r.jsxs)(l.Z,{className:"premium-card",sx:{p:4},children:[(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,r.jsx)(x.Z,{variant:"h6",color:"var(--beer-amber)",children:"Recent Activity"})}),z.length>0?(0,r.jsx)(h.Z,{sx:{p:0},children:z.map((e,t)=>(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(p.ZP,{alignItems:"flex-start",sx:{flexDirection:"column"},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(x.Z,{color:"var(--text-primary)",sx:{fontWeight:"bold"},children:e.brand||"Unknown Brand"}),(0,r.jsx)(x.Z,{variant:"body2",color:"var(--text-secondary)",children:new Date(e.timestamp).toLocaleString()}),e.placeInfo&&(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mt:.5},children:[(0,r.jsx)(N.Z,{sx:{fontSize:"0.9rem",color:"var(--text-secondary)",mr:.5}}),(0,r.jsx)(x.Z,{variant:"body2",color:"var(--text-secondary)",children:e.placeInfo.neighborhood?"".concat(e.placeInfo.neighborhood,", ").concat(e.placeInfo.city):e.placeInfo.address||"Unknown Location"})]})]}),K&&(0,r.jsx)(v.Z,{edge:"end","aria-label":"delete",onClick:()=>eo(e),sx:{color:"var(--text-secondary)"},children:(0,r.jsx)(S.Z,{})})]})}),t<z.length-1&&(0,r.jsx)(b.Z,{component:"li",sx:{bgcolor:"var(--border-color)"}})]},e.id))}):(0,r.jsx)(x.Z,{color:"var(--text-secondary)",sx:{fontStyle:"italic"},children:"No beers logged yet. Start logging your beer journey!"})]}),(0,r.jsxs)(y.Z,{open:J,onClose:()=>H(!1),PaperProps:{sx:{bgcolor:"var(--background)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}},children:[(0,r.jsx)(g.Z,{children:"Delete Beer Entry"}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(Z.Z,{sx:{color:"var(--text-secondary)"},children:"Are you sure you want to delete this beer entry? This action cannot be undone."})}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(w.Z,{onClick:()=>H(!1),disabled:X,sx:{color:"var(--text-primary)"},children:"Cancel"}),(0,r.jsx)(w.Z,{onClick:el,disabled:X,sx:{color:"rgb(211, 47, 47)"},startIcon:X?(0,r.jsx)(s.Z,{size:20}):(0,r.jsx)(S.Z,{}),children:X?"Deleting...":"Delete"})]})]}),K&&(0,r.jsxs)(d.Z,{className:"glass-card",sx:{mt:4,p:2},children:[(0,r.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Export Drink History"}),(0,r.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,r.jsx)(w.Z,{variant:"contained",onClick:()=>ei("excel"),sx:{bgcolor:"var(--beer-amber)"},children:"Export to Excel"}),(0,r.jsx)(w.Z,{variant:"contained",onClick:()=>ei("csv"),sx:{bgcolor:"var(--beer-amber)"},children:"Export to CSV"}),(0,r.jsx)(w.Z,{variant:"contained",onClick:()=>ei("json"),sx:{bgcolor:"var(--beer-amber)"},children:"Export to JSON"})]})]})]})})}},20067:function(){},72061:function(){}},function(e){e.O(0,[251,196,903,738,294,699,739,801,886,423,96,101,774,888,179],function(){return e(e.s=19344)}),_N_E=e.O()}]);